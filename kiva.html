<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Kiva &mdash; enable 4.5.0 documentation</title>
    
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '4.5.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="shortcut icon" href="_static/et.ico"/>
    <link rel="top" title="enable 4.5.0 documentation" href="index.html" />
    <link rel="prev" title="Enable Apptools Integration" href="enable_apptools_integration.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="enable_apptools_integration.html" title="Enable Apptools Integration"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">enable 4.5.0 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="kiva">
<h1>Kiva<a class="headerlink" href="#kiva" title="Permalink to this headline">¶</a></h1>
<p>Kiva is a 2D vector drawing interface providing functionality similar to
<a class="reference external" href="http://en.wikipedia.org/wiki/Quartz_2D">Quartz</a>,
<a class="reference external" href="http://cairographics.org/">Cairo</a>, the
<a class="reference external" href="http://qt-project.org/doc/qt-4.8/qpainter.html">Qt QPainter interface</a>,
the 2D drawing routines of <a class="reference external" href="http://www.opengl.org/">OpenGL</a> , the HTML5
Canvas element and many other similar 2D vector drawing APIs.  Rather than
re-implementing everything, Kiva is a Python interface layer that sits on top
of many different back-ends which are in fact provided by some of these
libraries, depending on the platform, GUI toolkit, and capabilities of the
system.</p>
<p>This approach permits code to be written to the Kiva API, but produce output
that could be rendered to a GUI window, an image file, a PDF file, or a number
of other possible output formats without any (or at least minimal) changes to
the image generation code.</p>
<p>Kiva is the base layer of the Chaco plotting library, and is what is
responsible for actually drawing pixels on the screen.  Developers interested
in writing code that renders new plots or other graphical features for Chaco
will need to be at least passingly familiar with the Kiva drawing API.</p>
<p>The most important Kiva backend is the Agg or &#8220;Image&#8221; backend, which is a
Python extension module which wraps the C++
<a class="reference external" href="http://www.antigrain.com/">Anti-grain geometry</a> drawing library into a
Python extension and exposes the Kiva API.  The Agg renders the vector drawing
commands into a raster image which can then be saved as a standard image format
(such as PNG or JPEG) or copied into a GUI window.  The Agg backend should be
available on any platform, and should work even if there is no GUI or windowing
system available.</p>
<div class="section" id="kiva-concepts">
<h2>Kiva Concepts<a class="headerlink" href="#kiva-concepts" title="Permalink to this headline">¶</a></h2>
<p>This section gives a whirlwind tour of the concepts involved with drawing with
Kiva.</p>
<div class="section" id="the-graphics-context">
<h3>The Graphics Context<a class="headerlink" href="#the-graphics-context" title="Permalink to this headline">¶</a></h3>
<p>The heart of the Kiva drawing API is the &#8220;graphics context&#8221;, frequently
abbreviated as <tt class="docutils literal"><span class="pre">gc</span></tt> in code.  The graphics context holds the current drawing
state (such as pen and fill colors, font state, and affine transformations to
be applied to points) and provides methods for changing the state and
performing drawing actions.</p>
<p>In many common use-cases (such as writing renderers for Chaco), you will be
provided a graphics context by other code, but it is straight-forward to create
your own graphics context:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">kiva.image</span> <span class="kn">import</span> <span class="n">GraphicsContext</span>

<span class="n">gc</span> <span class="o">=</span> <span class="n">GraphicsContext</span><span class="p">((</span><span class="mi">400</span><span class="p">,</span> <span class="mi">400</span><span class="p">))</span>
</pre></div>
</div>
<p>This is an graphics context for the Agg or &#8220;image&#8221; backend which has a size of
400x400 pixels.  If instead we wanted to draw into a Qt <tt class="docutils literal"><span class="pre">QPainter</span></tt> drawing
context in a <cite>QWidget</cite> called <cite>my_qwidget</cite> we would use:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">kiva.qpainter</span> <span class="kn">import</span> <span class="n">GraphicsContext</span>

<span class="n">gc</span> <span class="o">=</span> <span class="n">GraphicsContext</span><span class="p">((</span><span class="mi">400</span><span class="p">,</span> <span class="mi">400</span><span class="p">),</span> <span class="n">parent</span><span class="o">=</span><span class="n">my_qwidget</span><span class="p">)</span>
</pre></div>
</div>
<p>Other Kiva backends have similar methods of creating a graphics context, and
each may take somewhat different arguments to the constructor, depending on the
requirements of the backend.</p>
<p>Once you have a graphics context, you can use it to draw vector graphics.
For example, the following code will draw a translucent gray line from
(100, 100) to (100, 200):</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">gc</span><span class="o">.</span><span class="n">move_to</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
<span class="n">gc</span><span class="o">.</span><span class="n">line_to</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="mi">200</span><span class="p">)</span>
<span class="n">gc</span><span class="o">.</span><span class="n">set_stroke_color</span><span class="p">((</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">))</span>
<span class="n">gc</span><span class="o">.</span><span class="n">stroke_path</span><span class="p">()</span>
</pre></div>
</div>
<p>For many of the backends, you can save the rendered image out as an image file
using the <tt class="docutils literal"><span class="pre">save()</span></tt> method:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">gc</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s">&quot;my_line.png&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Kiva is numpy-aware, and has a number of methods that allow you to pass numpy
arrays of points to draw many things in one operation, with loops being
performed in C where possible:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">numpy</span> <span class="kn">import</span> <span class="n">empty</span><span class="p">,</span> <span class="n">linspace</span><span class="p">,</span> <span class="n">random</span>

<span class="c"># Nx2 array of points</span>
<span class="n">pts</span> <span class="o">=</span> <span class="n">empty</span><span class="p">(</span><span class="n">shape</span><span class="o">=</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">float</span><span class="p">)</span>
<span class="n">pts</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">linspace</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="mi">200</span><span class="p">,</span> <span class="mi">20</span><span class="p">)</span>
<span class="n">pts</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span><span class="o">*</span><span class="mi">100</span> <span class="o">+</span> <span class="mi">100</span>

<span class="n">gc</span><span class="o">.</span><span class="n">lines</span><span class="p">(</span><span class="n">pts</span><span class="p">)</span>
<span class="n">gc</span><span class="o">.</span><span class="n">stroke_path</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="section" id="coordinate-model">
<h3>Coordinate Model<a class="headerlink" href="#coordinate-model" title="Permalink to this headline">¶</a></h3>
<p>Kiva uses mathematical axes direction conventions as opposed to framebuffer
axes conventions.  In other words, the origin is always at the <em>bottom</em>
left of the screen, and the positive y axis goes <em>up</em> from bottom to top; as
opposed to screen coordinates which typically have the origin at the <em>top</em> left
and the positive y axis goes <em>down</em> from top to bottom.</p>
<p>Additionally, for backends that produce raster images, the coordinates
represent the <em>corner</em> of pixels, rather than the center of pixels.  This has
consequences when rendering thin lines.  Compare the two lines in this example,
for instance:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">kiva.image</span> <span class="kn">import</span> <span class="n">GraphicsContext</span>

<span class="n">gc</span> <span class="o">=</span> <span class="n">GraphicsContext</span><span class="p">((</span><span class="mi">200</span><span class="p">,</span> <span class="mi">100</span><span class="p">))</span>

<span class="n">gc</span><span class="o">.</span><span class="n">move_to</span><span class="p">(</span><span class="mi">40</span><span class="p">,</span> <span class="mi">35</span><span class="p">)</span>
<span class="n">gc</span><span class="o">.</span><span class="n">line_to</span><span class="p">(</span><span class="mi">160</span><span class="p">,</span> <span class="mi">35</span><span class="p">)</span>

<span class="n">gc</span><span class="o">.</span><span class="n">move_to</span><span class="p">(</span><span class="mi">40</span><span class="p">,</span> <span class="mf">65.5</span><span class="p">)</span>
<span class="n">gc</span><span class="o">.</span><span class="n">line_to</span><span class="p">(</span><span class="mi">160</span><span class="p">,</span> <span class="mf">65.5</span><span class="p">)</span>

<span class="n">gc</span><span class="o">.</span><span class="n">set_stroke_color</span><span class="p">((</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">))</span>
<span class="n">gc</span><span class="o">.</span><span class="n">stroke_path</span><span class="p">()</span>

<span class="n">gc</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s">&quot;pixel_coordinates.png&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Notice that the line on the bottom (the first of the two lines) is fuzzier
because it is drawn along the boundary of the pixels, while the other line
is drawn through the center of the pixels:</p>
<img alt="_images/pixel_coordinates.png" src="_images/pixel_coordinates.png" />
</div>
<div class="section" id="the-coordinate-transform-matrix">
<h3>The Coordinate Transform Matrix<a class="headerlink" href="#the-coordinate-transform-matrix" title="Permalink to this headline">¶</a></h3>
<p>The Kiva API allows arbitrary affine transforms to be applied to the graphics
context during drawing.  The API provides convenience methods for common
transformations, such as rotation and scaling:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">numpy</span> <span class="kn">import</span> <span class="n">empty</span><span class="p">,</span> <span class="n">linspace</span><span class="p">,</span> <span class="n">random</span><span class="p">,</span> <span class="n">pi</span>
<span class="kn">from</span> <span class="nn">kiva.image</span> <span class="kn">import</span> <span class="n">GraphicsContext</span>

<span class="c"># Nx2 array of points</span>
<span class="n">pts</span> <span class="o">=</span> <span class="n">empty</span><span class="p">(</span><span class="n">shape</span><span class="o">=</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">float</span><span class="p">)</span>
<span class="n">pts</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">linspace</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="mi">200</span><span class="p">,</span> <span class="mi">20</span><span class="p">)</span>
<span class="n">pts</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span><span class="o">*</span><span class="mi">100</span> <span class="o">+</span> <span class="mi">100</span>

<span class="n">gc</span> <span class="o">=</span> <span class="n">GraphicsContext</span><span class="p">((</span><span class="mi">400</span><span class="p">,</span> <span class="mi">400</span><span class="p">))</span>

<span class="c"># draw a simple graph</span>
<span class="n">gc</span><span class="o">.</span><span class="n">move_to</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="mi">200</span><span class="p">)</span>
<span class="n">gc</span><span class="o">.</span><span class="n">line_to</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
<span class="n">gc</span><span class="o">.</span><span class="n">line_to</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
<span class="n">gc</span><span class="o">.</span><span class="n">set_stroke_color</span><span class="p">((</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">))</span>
<span class="n">gc</span><span class="o">.</span><span class="n">stroke_path</span><span class="p">()</span>

<span class="n">gc</span><span class="o">.</span><span class="n">lines</span><span class="p">(</span><span class="n">pts</span><span class="p">)</span>
<span class="n">gc</span><span class="o">.</span><span class="n">set_stroke_color</span><span class="p">((</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">))</span>
<span class="n">gc</span><span class="o">.</span><span class="n">stroke_path</span><span class="p">()</span>

<span class="c"># translate by 100 pixels in the x direction</span>
<span class="n">gc</span><span class="o">.</span><span class="n">translate_ctm</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

<span class="c"># rotate by 45 degrees</span>
<span class="n">gc</span><span class="o">.</span><span class="n">rotate_ctm</span><span class="p">(</span><span class="n">pi</span><span class="o">/</span><span class="mf">4.0</span><span class="p">)</span>

<span class="c"># scale by 1.5 in the x direction</span>
<span class="n">gc</span><span class="o">.</span><span class="n">scale_ctm</span><span class="p">(</span><span class="mf">1.5</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span>

<span class="c"># now draw in the transformed coordinates</span>
<span class="n">gc</span><span class="o">.</span><span class="n">move_to</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="mi">200</span><span class="p">)</span>
<span class="n">gc</span><span class="o">.</span><span class="n">line_to</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
<span class="n">gc</span><span class="o">.</span><span class="n">line_to</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
<span class="n">gc</span><span class="o">.</span><span class="n">set_stroke_color</span><span class="p">((</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">))</span>
<span class="n">gc</span><span class="o">.</span><span class="n">stroke_path</span><span class="p">()</span>

<span class="n">gc</span><span class="o">.</span><span class="n">lines</span><span class="p">(</span><span class="n">pts</span><span class="p">)</span>
<span class="n">gc</span><span class="o">.</span><span class="n">set_stroke_color</span><span class="p">((</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">))</span>
<span class="n">gc</span><span class="o">.</span><span class="n">stroke_path</span><span class="p">()</span>

<span class="n">gc</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s">&#39;transformed_lines.png&#39;</span><span class="p">)</span>
</pre></div>
</div>
<img alt="_images/transformed_lines.png" src="_images/transformed_lines.png" />
<p>If desired, the user can also supply their own transformations directly.</p>
</div>
</div>
<div class="section" id="paths">
<h2>Paths<a class="headerlink" href="#paths" title="Permalink to this headline">¶</a></h2>
<p>The basic drawing operations are performed by building a path out of primitive
operations, and then performing stroking and/or filling operations with it.</p>
<p>The simplest path operations are <tt class="docutils literal"><span class="pre">move_to()</span></tt> and <tt class="docutils literal"><span class="pre">line_to()</span></tt> which
respectively move the current point in the path to the specified point, and
add a line to the path from the current point to the specified point.</p>
<p>In addition to the straight line commands, there are 4 arc commands for adding
curves to a path: <tt class="docutils literal"><span class="pre">curve_to()</span></tt> which draws a cubic bezier curve,
<tt class="docutils literal"><span class="pre">quad_curve_to()</span></tt> which draws a quadratic bezier curve, <tt class="docutils literal"><span class="pre">arc()</span></tt> which
draws a circular arc based on a center and radius, and <tt class="docutils literal"><span class="pre">arc_to()</span></tt> which
draws a circular arc from one point to another.</p>
<p>Finally, the <tt class="docutils literal"><span class="pre">rect()</span></tt> method adds a rectangle to the path.</p>
<p>In addition there are convenience methods <tt class="docutils literal"><span class="pre">lines()</span></tt>, <tt class="docutils literal"><span class="pre">rects()</span></tt> and
<tt class="docutils literal"><span class="pre">line_set()</span></tt> which add multiple lines or rectangles to a path, reading from
appropriately shaped numpy arrays.</p>
<p>None of these methods make any change to the visible image until the path is
either stroked with <tt class="docutils literal"><span class="pre">stroke_path()</span></tt> or filled with <tt class="docutils literal"><span class="pre">fill_path()</span></tt>.  The way
these actions are performed depends upon certain state of the graphics context.</p>
<p>For stroking, the graphics context keeps track of the color to use with
<tt class="docutils literal"><span class="pre">set_stroke_color()</span></tt>, the thickness of the line with <tt class="docutils literal"><span class="pre">set_line_width()</span></tt>,
the way that lines are joined with <tt class="docutils literal"><span class="pre">set_line_join()</span></tt> and
<tt class="docutils literal"><span class="pre">set_miter_limit()</span></tt>, and the way that they are ended with <tt class="docutils literal"><span class="pre">set_line_cap()</span></tt>.
Lines can also be dashed using the <tt class="docutils literal"><span class="pre">set_line_dash()</span></tt> method which takes a
pattern of numbers to use for lengths of on and off, and an optional <tt class="docutils literal"><span class="pre">phase</span></tt>
for where to start in the pattern.</p>
<p>Thicknesses:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">kiva.image</span> <span class="kn">import</span> <span class="n">GraphicsContext</span>

<span class="n">gc</span> <span class="o">=</span> <span class="n">GraphicsContext</span><span class="p">((</span><span class="mi">200</span><span class="p">,</span> <span class="mi">100</span><span class="p">))</span>

<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">):</span>
    <span class="n">y</span> <span class="o">=</span> <span class="mf">30.5</span> <span class="o">+</span> <span class="n">i</span><span class="o">*</span><span class="mi">10</span>
    <span class="n">thickness</span> <span class="o">=</span> <span class="mf">2.0</span><span class="o">**</span><span class="p">(</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>

    <span class="n">gc</span><span class="o">.</span><span class="n">move_to</span><span class="p">(</span><span class="mi">40</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
    <span class="n">gc</span><span class="o">.</span><span class="n">line_to</span><span class="p">(</span><span class="mi">160</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
    <span class="n">gc</span><span class="o">.</span><span class="n">set_line_width</span><span class="p">(</span><span class="n">thickness</span><span class="p">)</span>
    <span class="n">gc</span><span class="o">.</span><span class="n">stroke_path</span><span class="p">()</span>

<span class="n">gc</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s">&#39;thicknesses.png&#39;</span><span class="p">)</span>
</pre></div>
</div>
<img alt="_images/thicknesses.png" src="_images/thicknesses.png" />
<p>Joins:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">kiva.image</span> <span class="kn">import</span> <span class="n">GraphicsContext</span>
<span class="kn">from</span> <span class="nn">kiva.constants</span> <span class="kn">import</span> <span class="n">JOIN_ROUND</span><span class="p">,</span> <span class="n">JOIN_BEVEL</span><span class="p">,</span> <span class="n">JOIN_MITER</span>

<span class="n">gc</span> <span class="o">=</span> <span class="n">GraphicsContext</span><span class="p">((</span><span class="mi">200</span><span class="p">,</span> <span class="mi">100</span><span class="p">))</span>
<span class="n">gc</span><span class="o">.</span><span class="n">set_line_width</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span>

<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">join</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">([</span><span class="n">JOIN_ROUND</span><span class="p">,</span> <span class="n">JOIN_BEVEL</span><span class="p">,</span> <span class="n">JOIN_MITER</span><span class="p">]):</span>
    <span class="n">y</span> <span class="o">=</span> <span class="mi">20</span> <span class="o">+</span> <span class="n">i</span><span class="o">*</span><span class="mi">20</span>

    <span class="n">gc</span><span class="o">.</span><span class="n">move_to</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="mi">80</span><span class="p">)</span>
    <span class="n">gc</span><span class="o">.</span><span class="n">line_to</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
    <span class="n">gc</span><span class="o">.</span><span class="n">line_to</span><span class="p">(</span><span class="mi">160</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
    <span class="n">gc</span><span class="o">.</span><span class="n">set_line_join</span><span class="p">(</span><span class="n">join</span><span class="p">)</span>
    <span class="n">gc</span><span class="o">.</span><span class="n">stroke_path</span><span class="p">()</span>

<span class="n">gc</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s">&#39;joins.png&#39;</span><span class="p">)</span>
</pre></div>
</div>
<img alt="_images/joins.png" src="_images/joins.png" />
<p>Caps:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">kiva.image</span> <span class="kn">import</span> <span class="n">GraphicsContext</span>
<span class="kn">from</span> <span class="nn">kiva.constants</span> <span class="kn">import</span> <span class="n">CAP_ROUND</span><span class="p">,</span> <span class="n">CAP_BUTT</span><span class="p">,</span> <span class="n">CAP_SQUARE</span>

<span class="n">gc</span> <span class="o">=</span> <span class="n">GraphicsContext</span><span class="p">((</span><span class="mi">200</span><span class="p">,</span> <span class="mi">100</span><span class="p">))</span>
<span class="n">gc</span><span class="o">.</span><span class="n">set_line_width</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span>

<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">cap</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">([</span><span class="n">CAP_ROUND</span><span class="p">,</span> <span class="n">CAP_BUTT</span><span class="p">,</span> <span class="n">CAP_SQUARE</span><span class="p">]):</span>
    <span class="n">y</span> <span class="o">=</span> <span class="mi">30</span> <span class="o">+</span> <span class="n">i</span><span class="o">*</span><span class="mi">20</span>

    <span class="n">gc</span><span class="o">.</span><span class="n">move_to</span><span class="p">(</span><span class="mi">40</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
    <span class="n">gc</span><span class="o">.</span><span class="n">line_to</span><span class="p">(</span><span class="mi">160</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
    <span class="n">gc</span><span class="o">.</span><span class="n">set_line_cap</span><span class="p">(</span><span class="n">cap</span><span class="p">)</span>
    <span class="n">gc</span><span class="o">.</span><span class="n">stroke_path</span><span class="p">()</span>

<span class="n">gc</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s">&#39;caps.png&#39;</span><span class="p">)</span>
</pre></div>
</div>
<img alt="_images/caps.png" src="_images/caps.png" />
<p>Dashes:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">kiva.image</span> <span class="kn">import</span> <span class="n">GraphicsContext</span>

<span class="n">gc</span> <span class="o">=</span> <span class="n">GraphicsContext</span><span class="p">((</span><span class="mi">200</span><span class="p">,</span> <span class="mi">100</span><span class="p">))</span>
<span class="n">dashes</span> <span class="o">=</span> <span class="p">([</span><span class="mf">6.0</span><span class="p">,</span> <span class="mf">6.0</span><span class="p">],</span> <span class="p">[</span><span class="mf">9.0</span><span class="p">,</span> <span class="mf">3.0</span><span class="p">],</span> <span class="p">[</span><span class="mf">3.0</span><span class="p">,</span> <span class="mf">5.0</span><span class="p">,</span> <span class="mf">9.0</span><span class="p">,</span> <span class="mf">5.0</span><span class="p">])</span>
<span class="n">gc</span><span class="o">.</span><span class="n">set_line_width</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>

<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">dash</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">dashes</span><span class="p">):</span>
    <span class="n">y</span> <span class="o">=</span> <span class="mf">30.5</span> <span class="o">+</span> <span class="n">i</span><span class="o">*</span><span class="mi">20</span>

    <span class="n">gc</span><span class="o">.</span><span class="n">move_to</span><span class="p">(</span><span class="mi">40</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
    <span class="n">gc</span><span class="o">.</span><span class="n">line_to</span><span class="p">(</span><span class="mi">160</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
    <span class="n">gc</span><span class="o">.</span><span class="n">set_line_dash</span><span class="p">(</span><span class="n">dash</span><span class="p">)</span>
    <span class="n">gc</span><span class="o">.</span><span class="n">stroke_path</span><span class="p">()</span>

<span class="n">gc</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s">&#39;dashes.png&#39;</span><span class="p">)</span>
</pre></div>
</div>
<img alt="_images/dashes.png" src="_images/dashes.png" />
<p>Before filling a path, the colour of the fill is via the <tt class="docutils literal"><span class="pre">set_fill_color()</span></tt>
method, and gradient fills can be done via the <tt class="docutils literal"><span class="pre">set_linear_gradient()</span></tt> and
<tt class="docutils literal"><span class="pre">set_radial_gradient()</span></tt> methods.  Finally, there are two different fill modes
available:
<a class="reference external" href="http://en.wikipedia.org/wiki/Even%E2%80%93odd_rule">even-odd fill</a> and
<a class="reference external" href="http://en.wikipedia.org/wiki/Nonzero-rule">non-zero winding fill</a></p>
<p>Winding vs. Even-Odd Fill:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">numpy</span> <span class="kn">import</span> <span class="n">pi</span>
<span class="kn">from</span> <span class="nn">kiva.image</span> <span class="kn">import</span> <span class="n">GraphicsContext</span>
<span class="kn">from</span> <span class="nn">kiva.constants</span> <span class="kn">import</span> <span class="n">FILL</span><span class="p">,</span> <span class="n">EOF_FILL</span>

<span class="n">gc</span> <span class="o">=</span> <span class="n">GraphicsContext</span><span class="p">((</span><span class="mi">200</span><span class="p">,</span> <span class="mi">100</span><span class="p">))</span>
<span class="n">gc</span><span class="o">.</span><span class="n">set_fill_color</span><span class="p">((</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">))</span>

<span class="n">gc</span><span class="o">.</span><span class="n">move_to</span><span class="p">(</span><span class="mi">50</span><span class="p">,</span> <span class="mi">90</span><span class="p">)</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">6</span><span class="p">):</span>
    <span class="n">theta</span> <span class="o">=</span> <span class="mi">4</span><span class="o">*</span><span class="n">pi</span><span class="o">/</span><span class="mi">5</span><span class="o">*</span><span class="n">i</span>
    <span class="n">x</span> <span class="o">=</span> <span class="mi">50</span><span class="o">+</span><span class="mi">40</span><span class="o">*</span><span class="n">sin</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span>
    <span class="n">y</span> <span class="o">=</span> <span class="mi">50</span><span class="o">+</span><span class="mi">40</span><span class="o">*</span><span class="n">cos</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span>
    <span class="n">gc</span><span class="o">.</span><span class="n">line_to</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>

<span class="n">gc</span><span class="o">.</span><span class="n">fill_path</span><span class="p">()</span>


<span class="n">gc</span><span class="o">.</span><span class="n">move_to</span><span class="p">(</span><span class="mi">150</span><span class="p">,</span> <span class="mi">90</span><span class="p">)</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">6</span><span class="p">):</span>
    <span class="n">theta</span> <span class="o">=</span> <span class="mi">4</span><span class="o">*</span><span class="n">pi</span><span class="o">/</span><span class="mi">5</span><span class="o">*</span><span class="n">i</span>
    <span class="n">x</span> <span class="o">=</span> <span class="mi">150</span><span class="o">+</span><span class="mi">40</span><span class="o">*</span><span class="n">sin</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span>
    <span class="n">y</span> <span class="o">=</span> <span class="mi">50</span><span class="o">+</span><span class="mi">40</span><span class="o">*</span><span class="n">cos</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span>
    <span class="n">gc</span><span class="o">.</span><span class="n">line_to</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>

<span class="n">gc</span><span class="o">.</span><span class="n">eof_fill_path</span><span class="p">()</span>

<span class="n">gc</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s">&#39;fill.png&#39;</span><span class="p">)</span>
</pre></div>
</div>
<img alt="_images/fill.png" src="_images/fill.png" />
<div class="section" id="text">
<h3>Text<a class="headerlink" href="#text" title="Permalink to this headline">¶</a></h3>
<p>Text can be rendered at a point by first setting the font to use, then setting
the text location using <tt class="docutils literal"><span class="pre">set_text_position()</span></tt> and then <tt class="docutils literal"><span class="pre">show_text()</span></tt> to
render the text:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">kiva.fonttools</span> <span class="kn">import</span> <span class="n">Font</span>
<span class="kn">from</span> <span class="nn">kiva.image</span> <span class="kn">import</span> <span class="n">GraphicsContext</span>

<span class="n">gc</span> <span class="o">=</span> <span class="n">GraphicsContext</span><span class="p">((</span><span class="mi">200</span><span class="p">,</span> <span class="mi">100</span><span class="p">))</span>

<span class="n">gc</span><span class="o">.</span><span class="n">set_font</span><span class="p">(</span><span class="n">Font</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="mi">24</span><span class="p">))</span>
<span class="n">gc</span><span class="o">.</span><span class="n">set_text_position</span><span class="p">(</span><span class="mi">30</span><span class="p">,</span> <span class="mi">40</span><span class="p">)</span>
<span class="n">gc</span><span class="o">.</span><span class="n">show_text</span><span class="p">(</span><span class="s">&quot;Hello World&quot;</span><span class="p">)</span>

<span class="n">gc</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s">&#39;text.png&#39;</span><span class="p">)</span>
</pre></div>
</div>
<img alt="_images/text.png" src="_images/text.png" />
<p>Text defaults to being rendered filled, but can be rendered with an outline.</p>
</div>
</div>
</div>
<div class="section" id="kiva-interface-quick-reference">
<h1>Kiva Interface Quick Reference<a class="headerlink" href="#kiva-interface-quick-reference" title="Permalink to this headline">¶</a></h1>
<p>This document is a summary of the classes and functions available in
Kiva.  More specifically, it describes some of the details of the
kiva.agg backend, including enumerated types and helper classes.</p>
<div class="section" id="types">
<h2>Types<a class="headerlink" href="#types" title="Permalink to this headline">¶</a></h2>
<div class="section" id="primitive-types">
<h3>Primitive types<a class="headerlink" href="#primitive-types" title="Permalink to this headline">¶</a></h3>
<p>The following conventions are used to describe input and output types:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">color:</th><td class="field-body">Either a 3-tuple or 4-tuple. The represented color depends on the
graphics context&#8217;s pixel format.</td>
</tr>
<tr class="field-even field"><th class="field-name">rect:</th><td class="field-body">(origin_x, origin_y, width, height)</td>
</tr>
<tr class="field-odd field"><th class="field-name">bool:</th><td class="field-body">an int that is 1 or 0</td>
</tr>
<tr class="field-even field"><th class="field-name">point_array:</th><td class="field-body">an array/sequence of length-2 arrays, e.g. ((x,y), (x2,y2),...)</td>
</tr>
<tr class="field-odd field"><th class="field-name">rect_array:</th><td class="field-body">an array/sequence of rects ((x,y,w,h), (x2,y2,w2,h2), ...)</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">color_stop_array:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">an array/sequence of color stops ((offset,r,g,b,a),
(offset2,r2,g2,b2,a2), ...) where offset is some number between 0 and 1
inclusive and the entries are sorted from lowest offset to highest.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="affinematrix">
<h3>AffineMatrix<a class="headerlink" href="#affinematrix" title="Permalink to this headline">¶</a></h3>
<p>All of the following member functions modify the instance on which they
are called:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">__init__(v0, v1, v2, v3, v4, v5):</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">also __init__()</td>
</tr>
<tr class="field-even field"><th class="field-name">reset():</th><td class="field-body">Sets this matrix to the identity</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">multiply(<cite>AffineMatrix</cite>):</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">multiples this matrix by another</td>
</tr>
<tr class="field-even field"><th class="field-name">invert():</th><td class="field-body">sets this matrix to the inverse of itself</td>
</tr>
<tr class="field-odd field"><th class="field-name">flip_x():</th><td class="field-body">mirrors around X</td>
</tr>
<tr class="field-even field"><th class="field-name">flip_y():</th><td class="field-body">mirrors around Y</td>
</tr>
</tbody>
</table>
<p>The rest of the member functions return information about the matrix.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">scale() -&gt; float:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">returns the average scale of this matrix</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">determinant() -&gt; float:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">returns the determinant</td>
</tr>
</tbody>
</table>
<p>The following factory methods are available in the top-level &#8220;agg&#8221; namespace
to create specific kinds of <tt class="xref py py-class docutils literal"><span class="pre">AffineMatrix</span></tt> instances:</p>
<p><strong>translation_matrix(float x, float x)</strong></p>
<p><strong>rotation_matrix(float angle_in_radians)</strong></p>
<p><strong>scaling_matrix(float x_scale, float y_scale)</strong></p>
<p><strong>skewing_matrix(float x_shear, float y_shear)</strong></p>
</div>
<div class="section" id="fonttype">
<h3>FontType<a class="headerlink" href="#fonttype" title="Permalink to this headline">¶</a></h3>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">__init__(name, size=12, family=0, style=0):</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">constructs a <tt class="xref py py-class docutils literal"><span class="pre">FontType</span></tt> instance</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">is_loaded() -&gt; bool:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">returns True if a font was actually loaded</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="compiledpath">
<h3>CompiledPath<a class="headerlink" href="#compiledpath" title="Permalink to this headline">¶</a></h3>
<p>Interface is the same as the <a class="reference internal" href="#path-functions">Path functions</a> in Graphics Context.</p>
</div>
<div class="section" id="enumerations">
<h3>Enumerations<a class="headerlink" href="#enumerations" title="Permalink to this headline">¶</a></h3>
<p>The following enumerations are represented by top-level constants in the &#8220;agg&#8221;
namespace.  They are fundamentally integers.  Some of them also have dicts that
map between their names and integer values</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">line_cap:</th><td class="field-body">CAP_BUTT, CAP_ROUND, CAP_SQUARE</td>
</tr>
<tr class="field-even field"><th class="field-name">line_join:</th><td class="field-body">JOIN_ROUND, JOIN_BEVEL, JOIN_MITER</td>
</tr>
<tr class="field-odd field"><th class="field-name">draw_mode:</th><td class="field-body">FILL, EOF_FILL, STROKE, FILL_STROKE, EOF_FILL_STROKE</td>
</tr>
<tr class="field-even field"><th class="field-name">text_style:</th><td class="field-body">NORMAL, BOLD, ITALIC</td>
</tr>
<tr class="field-odd field"><th class="field-name">text_draw_mode:</th><td class="field-body">TEXT_FILL, TEXT_INVISIBLE (currently unused)</td>
</tr>
<tr class="field-even field"><th class="field-name">pix_format:</th><td class="field-body">(NOTE: the strings in the dicts omit the <tt class="docutils literal"><span class="pre">pix_format_</span></tt> prefix)</td>
</tr>
</tbody>
</table>
<ul>
<li><p class="first">dicts: pix_format_string_map, pix_format_enum_map</p>
</li>
<li><dl class="first docutils">
<dt>values: pix_format_gray8, pix_format_rgb555, pix_format_rgb565,</dt>
<dd><p class="first last">pix_format_rgb24, pix_format_bgr24, pix_format_rgba32, pix_format_argb32,
pix_format_abgr32, pix_format_bgra32</p>
</dd>
</dl>
</li>
</ul>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">interpolation:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<ul>
<li><p class="first">dicts: interp_enum_map, interp_string_map</p>
</li>
<li><dl class="first docutils">
<dt>values: nearest, bilinear, bicubic, spline16, spline36, sinc64, sinc144,</dt>
<dd><p class="first last">sinc256, blackman64, blackman100, blackman256</p>
</dd>
</dl>
</li>
</ul>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">marker:</th><td class="field-body">(NOTE: the strings in the dicts omit the <tt class="docutils literal"><span class="pre">marker_</span></tt> prefix)</td>
</tr>
</tbody>
</table>
<ul>
<li><p class="first">dicts: marker_string_map, marker_enum_map</p>
</li>
<li><dl class="first docutils">
<dt>values: marker_circle, marker_cross, marker_crossed_circle, marker_dash,</dt>
<dd><p class="first last">marker_diamond, marker_dot, marker_four_rays, marker_pixel,
marker_semiellipse_down, marker_semiellipse_left, marker_x,
marker_semiellipse_right, marker_semiellipse_up, marker_square,
marker_triangle_down, marker_triangle_left, marker_triangle_right,
marker_triangle_up</p>
</dd>
</dl>
</li>
</ul>
<p>path_cmd and path_flags are low-level Agg path attributes.  See the Agg
documentation for more information about them.  We just pass them through in Kiva.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">path_cmd:</th><td class="field-body">path_cmd_curve3, path_cmd_curve4, path_cmd_end_poly,
path_cmd_line_to, path_cmd_mask, path_cmd_move_to, path_cmd_stop</td>
</tr>
<tr class="field-even field"><th class="field-name">path_flags:</th><td class="field-body">path_flags, path_flags_ccw, path_flags_close, path_flags_cw,
path_flags_mask, path_flags_none</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="graphics-context">
<h2>Graphics Context<a class="headerlink" href="#graphics-context" title="Permalink to this headline">¶</a></h2>
<div class="section" id="construction">
<h3>Construction<a class="headerlink" href="#construction" title="Permalink to this headline">¶</a></h3>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">__init__(size, pix_format):</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">Size is a tuple (width, height), pix_format
is a string.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="state-functions">
<h3>State functions<a class="headerlink" href="#state-functions" title="Permalink to this headline">¶</a></h3>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">save_state():</th><td class="field-body"></td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">restore_state():</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body"></td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">set_stroke_color(color):</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body"></td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">get_stroke_color() -&gt; color:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body"></td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">set_line_width(float):</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body"></td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">set_line_join(line_join):</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body"></td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">set_line_cap(line_cap):</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body"></td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">set_line_dash(array):</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">array is an even-length tuple of floats that represents
the width of each dash and gap in the dash pattern.</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">set_fill_color(color):</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body"></td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">get_fill_color() -&gt; color:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body"></td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">linear_gradient(x1, y1, x2, y2, color_stop_array, spread_method, units):</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">spread_method
is one of the following strings: pad, reflect, repeat. units is one of the
following strings: userSpaceOnUse, objectBoundingBox. This method modifies
the current fill pattern.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">radial_gradient(cx, cy, r, fx, fy, color_stop_array, spread_method, units):</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">same
arguments as linear gradient. The direction of the gradient is from the focus
point to the center point.</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">set_alpha(float):</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body"></td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">get_alpha() -&gt; float:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body"></td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">set_antialias(bool):</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body"></td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">get_antialias() -&gt; bool:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body"></td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">set_miter_limit(float):</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body"></td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">set_flatness(float):</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body"></td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">get_image_interpolation() -&gt; interpolation:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body"></td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">set_image_interpolation(interpolation):</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body"></td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">translate_ctm(float x, float y):</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body"></td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">rotate_ctm(float angle_in_radians):</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body"></td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">concat_ctm(<a class="reference internal" href="#affinematrix">AffineMatrix</a>):</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body"></td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">scale_ctm(float x_scale, float y_scale):</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body"></td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">set_ctm(<a class="reference internal" href="#affinematrix">AffineMatrix</a>):</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body"></td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">get_ctm() -&gt; <a class="reference internal" href="#affinematrix">AffineMatrix</a>:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body"></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="clipping-functions">
<h3>Clipping functions<a class="headerlink" href="#clipping-functions" title="Permalink to this headline">¶</a></h3>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">clip_to_rect(rect):</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body"></td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">clip_to_rects(rect_array):</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body"></td>
</tr>
<tr class="field-odd field"><th class="field-name">clip():</th><td class="field-body">clips using the current path</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">even_odd_clip():</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">modifies the current clipping path using the even-odd rule to
calculate the intersection of the current path and the current clipping path.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="path-functions">
<h3>Path functions<a class="headerlink" href="#path-functions" title="Permalink to this headline">¶</a></h3>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">begin_path():</th><td class="field-body"></td>
</tr>
<tr class="field-even field"><th class="field-name">close_path():</th><td class="field-body"></td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">get_empty_path() -&gt; <a class="reference internal" href="#compiledpath">CompiledPath</a>:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body"><p class="first">returns a blank <tt class="xref py py-class docutils literal"><span class="pre">CompiledPath</span></tt> instance</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">add_path(<a class="reference internal" href="#compiledpath">CompiledPath</a>):</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body"></td>
</tr>
<tr class="field-odd field"><th class="field-name">move_to(x, y):</th><td class="field-body"></td>
</tr>
<tr class="field-even field"><th class="field-name">line_to(x, y):</th><td class="field-body"></td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">lines(point_array):</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body"></td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">rect(x, y, w, h):</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body"></td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">rects(rect_array):</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body"></td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">curve_to(x1, y1, x2, y2, end_x, end_y):</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body"><p class="first">draws a cubic bezier curve with
control points (x1,y1) and (x2,y2) that ends at point (end_x, end_y)</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">quad_curve_to(cp_x, cp_y, end_x, end_y):</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body"><p class="first">draws a quadratic bezier curve from
the current point using control point (cp_x, cp_y) and ending at
(end_x, end_y)</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">arc(x, y, radius, start_angle, end_angle, bool cw=false):</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body"><p class="first">draws a circular arc
of the given radius, centered at (x,y) with angular span as indicated.
Angles are measured counter-clockwise from the positive X axis. If &#8220;cw&#8221; is
true, then the arc is swept from the end_angle back to the start_angle
(it does not change the sense in which the angles are measured).</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">arc_to(x1, y1, x2, y2, radius):</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body"><p class="first">Sweeps a circular arc from the pen position to
a point on the line from (x1,y1) to (x2,y2).</p>
<p>The arc is tangent to the line from the current pen position
to (x1,y1), and it is also tangent to the line from (x1,y1)
to (x2,y2).  (x1,y1) is the imaginary intersection point of
the two lines tangent to the arc at the current point and
at (x2,y2).</p>
<p>If the tangent point on the line from the current pen position
to (x1,y1) is not equal to the current pen position, a line is
drawn to it.  Depending on the supplied radius, the tangent
point on the line fron (x1,y1) to (x2,y2) may or may not be
(x2,y2).  In either case, the arc is drawn to the point of
tangency, which is also the new pen position.</p>
<p class="last">Consider the common case of rounding a rectangle&#8217;s upper left
corner.  Let &#8220;r&#8221; be the radius of rounding.  Let the current
pen position be (x_left + r, y_top).  Then (x2,y2) would be
(x_left, y_top - radius), and (x1,y1) would be (x_left, y_top).</p>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="drawing-functions">
<h3>Drawing functions<a class="headerlink" href="#drawing-functions" title="Permalink to this headline">¶</a></h3>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">stroke_path():</th><td class="field-body"></td>
</tr>
<tr class="field-even field"><th class="field-name">fill_path():</th><td class="field-body"></td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">eof_fill_path():</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body"></td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">draw_path(draw_mode=FILL_STROKE):</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body"></td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">draw_rect(rect, draw_mode=FILL_STROKE):</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body"></td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">draw_marker_at_points(point_array, int size, marker=marker_square):</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body"></td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">draw_path_at_points(point_array, <a class="reference internal" href="#compiledpath">CompiledPath</a>, draw_mode):</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body"></td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">draw_image(graphics_context img, rect=None):</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">if rect is defined, then img is
scaled and drawn into it. Otherwise, img is overlaid exactly on top of this
graphics context</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="text-functions">
<h3>Text functions<a class="headerlink" href="#text-functions" title="Permalink to this headline">¶</a></h3>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">set_text_drawing_mode(text_draw_mode):</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body"></td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">set_text_matrix(<a class="reference internal" href="#affinematrix">AffineMatrix</a>):</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body"></td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">get_text_matrix() -&gt; <a class="reference internal" href="#affinematrix">AffineMatrix</a>:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body"></td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">set_text_position(float x, float x):</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body"></td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">get_text_position() -&gt; (x, y):</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body"></td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">show_text(string):</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body"></td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">show_text_translate(string, float y, float y):</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body"></td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">get_text_extent(string) -&gt; (x,y,w,h):</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body"></td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">get_full_text_extent(string) -&gt; (w,h,x,y):</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">deprecated. Order has been changed
for backwards-compatibility with existing Enable.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">select_font(name, size, style):</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body"></td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">set_font(<a class="reference internal" href="#fonttype">FontType</a>):</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body"></td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">get_font() -&gt; <a class="reference internal" href="#fonttype">FontType</a>:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body"></td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">set_font_size(int):</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body"></td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">set_character_spacing():</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body"></td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">get_character_spacing():</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body"></td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">set_text_drawing_mode():</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body"></td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">show_text_at_point():</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body"></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="misc-functions">
<h3>Misc functions<a class="headerlink" href="#misc-functions" title="Permalink to this headline">¶</a></h3>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">width() -&gt; int:</th><td class="field-body"></td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">height() -&gt; int:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body"></td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">stride() -&gt; int:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body"></td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">bottom_up() -&gt; bool:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body"></td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">format() -&gt; pix_format:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body"></td>
</tr>
<tr class="field-even field"><th class="field-name">flush():</th><td class="field-body"><p class="first">Force all pending drawing operations to be rendered immediately. This
only makes sense in window contexts, ie- the Mac Quartz backend.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">synchronize():</th><td class="field-body"><p class="first">A deferred version of flush(). Also only relevant in window contexts.</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">begin_page():</th><td class="field-body"></td>
</tr>
<tr class="field-odd field"><th class="field-name">end_page():</th><td class="field-body"></td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">clear_rect(rect):</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body"><p class="first">Clears a rect. Not available in PDF context.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">convert_pixel_format(pix_format, bool inplace=0):</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body"></td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">save(filename, file_format=None, pil_options=None):</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body"><p class="first">Save the GraphicsContext
to a file.  Output files are always saved in RGB or RGBA format; if this GC is
not in one of these formats, it is automatically converted.</p>
<p>If filename includes an extension, the image format is
inferred from it.  file_format is only required if the
format can&#8217;t be inferred from the filename (e.g. if you
wanted to save a PNG file as a .dat or .bin).</p>
<p>pil_options is a dict of format-specific options that
are passed down to the PIL image file writer.  If a writer
doesn&#8217;t recognize an option, it is silently ignored.</p>
<p class="last">If the image has an alpha channel and the specified output
file format does not support alpha, the image is saved in
rgb24 format.</p>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="functions-that-are-currently-stubbed-out-or-not-implemented">
<h3>Functions that are currently stubbed out or not implemented<a class="headerlink" href="#functions-that-are-currently-stubbed-out-or-not-implemented" title="Permalink to this headline">¶</a></h3>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">show_glyphs_at_point():</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body"></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="index.html">
              <img class="logo" src="_static/e-logo-rev.png" alt="Logo"/>
            </a></p>
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Kiva</a><ul>
<li><a class="reference internal" href="#kiva-concepts">Kiva Concepts</a><ul>
<li><a class="reference internal" href="#the-graphics-context">The Graphics Context</a></li>
<li><a class="reference internal" href="#coordinate-model">Coordinate Model</a></li>
<li><a class="reference internal" href="#the-coordinate-transform-matrix">The Coordinate Transform Matrix</a></li>
</ul>
</li>
<li><a class="reference internal" href="#paths">Paths</a><ul>
<li><a class="reference internal" href="#text">Text</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#kiva-interface-quick-reference">Kiva Interface Quick Reference</a><ul>
<li><a class="reference internal" href="#types">Types</a><ul>
<li><a class="reference internal" href="#primitive-types">Primitive types</a></li>
<li><a class="reference internal" href="#affinematrix">AffineMatrix</a></li>
<li><a class="reference internal" href="#fonttype">FontType</a></li>
<li><a class="reference internal" href="#compiledpath">CompiledPath</a></li>
<li><a class="reference internal" href="#enumerations">Enumerations</a></li>
</ul>
</li>
<li><a class="reference internal" href="#graphics-context">Graphics Context</a><ul>
<li><a class="reference internal" href="#construction">Construction</a></li>
<li><a class="reference internal" href="#state-functions">State functions</a></li>
<li><a class="reference internal" href="#clipping-functions">Clipping functions</a></li>
<li><a class="reference internal" href="#path-functions">Path functions</a></li>
<li><a class="reference internal" href="#drawing-functions">Drawing functions</a></li>
<li><a class="reference internal" href="#text-functions">Text functions</a></li>
<li><a class="reference internal" href="#misc-functions">Misc functions</a></li>
<li><a class="reference internal" href="#functions-that-are-currently-stubbed-out-or-not-implemented">Functions that are currently stubbed out or not implemented</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="enable_apptools_integration.html"
                        title="previous chapter">Enable Apptools Integration</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/kiva.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="enable_apptools_integration.html" title="Enable Apptools Integration"
             >previous</a> |</li>
        <li><a href="index.html">enable 4.5.0 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2008-2015, Enthought.
      Last updated on Apr 01, 2015.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.3.
    </div>
  </body>
</html>