<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8">
    
    <title>kiva.basecore2d &mdash; enable 5.0.0 documentation</title>
    
    <link rel="stylesheet" type="text/css" href="../../_static/css/spc-bootstrap.css">
    <link rel="stylesheet" type="text/css" href="../../_static/css/spc-extend.css">
    <link rel="stylesheet" href="../../_static/enthought.css" type="text/css" >
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" >
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '5.0.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        LINK_SUFFIX: '',
        SOURCELINK_SUFFIX: '.txt',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/language_data.js"></script>
    <script type="text/javascript" src="../../_static/js/copybutton.js"></script>
    <script type="text/javascript" src="../../_static/js/wrap_on_dot.js"></script>
    <link rel="shortcut icon" href="../../_static/img/favicon.ico">
    <link rel="index" title="Index" href="../../genindex.html" >
    <link rel="search" title="Search" href="../../search.html" >
    <link rel="top" title="enable 5.0.0 documentation" href="../../index.html" >
    <link rel="up" title="Module code" href="../index.html" > 
  </head>
  <body>
  <div class="container">
    <div class="header">
    </div>
  </div>

    <div class="container">
      <div class="main">
        
	<div class="row-fluid">
	  <div class="span12">
	    <div class="spc-navbar">
              
    <ul class="nav nav-pills pull-left">
	
        <li class="active"><a href="../../index.html">enable 5.0.0 documentation</a></li>
	
          <li class="active"><a href="../index.html" accesskey="U">Module code</a></li> 
    </ul>
              
              
    <ul class="nav nav-pills pull-right">
      <li class="active">
        <a href="../../genindex.html" title="General Index"
           accesskey="I">index</a>
      </li>
      <li class="active">
        <a href="../../py-modindex.html" title="Python Module Index"
           >modules</a>
      </li>
    </ul>
              
	    </div>
	  </div>
	</div>
        

	<div class="row-fluid">
          <div class="span9">
            
        <div class="bodywrapper">
          <div class="body" id="spc-section-body" role="main">
            
  <h1>Source code for kiva.basecore2d</h1><div class="highlight"><pre>
<span></span><span class="c1"># (C) Copyright 2005-2021 Enthought, Inc., Austin, TX</span>
<span class="c1"># All rights reserved.</span>
<span class="c1">#</span>
<span class="c1"># This software is provided without warranty under the terms of the BSD</span>
<span class="c1"># license included in LICENSE.txt and may be redistributed only under</span>
<span class="c1"># the conditions described in the aforementioned license. The license</span>
<span class="c1"># is also available online at http://www.enthought.com/licenses/BSD.txt</span>
<span class="c1">#</span>
<span class="c1"># Thanks for using Enthought open source!</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Pure-Python reference implementation of a Kiva graphics context.</span>

<span class="sd">Data Structures</span>
<span class="sd">---------------</span>

<span class="sd">color</span>
<span class="sd">    1-D array with 4 elements.</span>
<span class="sd">    The array elements represent (red, green, blue, alpha)</span>
<span class="sd">    and are each between 0 and 1.  Alpha is a transparency</span>
<span class="sd">    value with 0 being fully transparent and 1 being fully</span>
<span class="sd">    opaque.  Many backends do not handle tranparency and</span>
<span class="sd">    treat any alpha value greater than 0 as fully opaque.</span>
<span class="sd">transform</span>
<span class="sd">    currently a 3x3 array.  This is not the</span>
<span class="sd">    most convenient in some backends.  Mac and OpenGL</span>
<span class="sd">    use a 1-D 6 element array.  We need to either make</span>
<span class="sd">    transform a class or always use accessor functions</span>
<span class="sd">    to access its values. Currently, I do the latter.</span>

<span class="sd">&quot;&quot;&quot;</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">numpy</span> <span class="k">import</span> <span class="n">alltrue</span><span class="p">,</span> <span class="n">array</span><span class="p">,</span> <span class="n">asarray</span><span class="p">,</span> <span class="n">concatenate</span><span class="p">,</span> <span class="n">float64</span><span class="p">,</span> <span class="n">pi</span><span class="p">,</span> <span class="n">shape</span>

<span class="kn">from</span> <span class="nn">.constants</span> <span class="k">import</span> <span class="p">(</span>
    <span class="n">CAP_BUTT</span><span class="p">,</span> <span class="n">CAP_ROUND</span><span class="p">,</span> <span class="n">CAP_SQUARE</span><span class="p">,</span> <span class="n">CLOSE</span><span class="p">,</span> <span class="n">CONCAT_CTM</span><span class="p">,</span> <span class="n">EOF_FILL_STROKE</span><span class="p">,</span>
    <span class="n">EOF_FILL</span><span class="p">,</span> <span class="n">FILL_STROKE</span><span class="p">,</span> <span class="n">FILL</span><span class="p">,</span> <span class="n">JOIN_BEVEL</span><span class="p">,</span> <span class="n">JOIN_MITER</span><span class="p">,</span> <span class="n">JOIN_ROUND</span><span class="p">,</span> <span class="n">LINE</span><span class="p">,</span>
    <span class="n">LINES</span><span class="p">,</span> <span class="n">LOAD_CTM</span><span class="p">,</span> <span class="n">NO_DASH</span><span class="p">,</span> <span class="n">POINT</span><span class="p">,</span> <span class="n">RECT</span><span class="p">,</span> <span class="n">ROTATE_CTM</span><span class="p">,</span> <span class="n">SCALE_CTM</span><span class="p">,</span> <span class="n">STROKE</span><span class="p">,</span>
    <span class="n">TEXT_CLIP</span><span class="p">,</span> <span class="n">TEXT_FILL_CLIP</span><span class="p">,</span> <span class="n">TEXT_FILL_STROKE_CLIP</span><span class="p">,</span> <span class="n">TEXT_FILL_STROKE</span><span class="p">,</span>
    <span class="n">TEXT_FILL</span><span class="p">,</span> <span class="n">TEXT_INVISIBLE</span><span class="p">,</span> <span class="n">TEXT_OUTLINE</span><span class="p">,</span> <span class="n">TEXT_STROKE_CLIP</span><span class="p">,</span> <span class="n">TEXT_STROKE</span><span class="p">,</span>
    <span class="n">TRANSLATE_CTM</span><span class="p">,</span>
<span class="p">)</span>
<span class="kn">from</span> <span class="nn">.abstract_graphics_context</span> <span class="k">import</span> <span class="n">AbstractGraphicsContext</span>
<span class="kn">from</span> <span class="nn">.line_state</span> <span class="k">import</span> <span class="n">LineState</span><span class="p">,</span> <span class="n">line_state_equal</span>
<span class="kn">from</span> <span class="nn">.graphics_state</span> <span class="k">import</span> <span class="n">GraphicsState</span>
<span class="kn">from</span> <span class="nn">.fonttools</span> <span class="k">import</span> <span class="n">Font</span>
<span class="kn">import</span> <span class="nn">kiva.affine</span> <span class="k">as</span> <span class="nn">affine</span>

<span class="c1"># --------------------------------------------------------------------</span>
<span class="c1"># Drawing style tests.</span>
<span class="c1">#</span>
<span class="c1"># Simple tests used by drawing methods to determine what kind of</span>
<span class="c1"># drawing command is supposed to be executed.</span>
<span class="c1"># --------------------------------------------------------------------</span>


<div class="viewcode-block" id="is_point"><a class="viewcode-back" href="../../api/kiva.basecore2d.html#kiva.basecore2d.is_point">[docs]</a><span class="k">def</span> <span class="nf">is_point</span><span class="p">(</span><span class="n">tup</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">tup</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="n">POINT</span></div>


<div class="viewcode-block" id="is_line"><a class="viewcode-back" href="../../api/kiva.basecore2d.html#kiva.basecore2d.is_line">[docs]</a><span class="k">def</span> <span class="nf">is_line</span><span class="p">(</span><span class="n">tup</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">tup</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="n">LINE</span></div>


<div class="viewcode-block" id="is_fully_transparent"><a class="viewcode-back" href="../../api/kiva.basecore2d.html#kiva.basecore2d.is_fully_transparent">[docs]</a><span class="k">def</span> <span class="nf">is_fully_transparent</span><span class="p">(</span><span class="n">color</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Tests a color array to see whether it is fully transparent or not.</span>

<span class="sd">    This is true if the alpha value (4th entry in the color array) is 0.0.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">transparent</span> <span class="o">=</span> <span class="n">color</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">==</span> <span class="mf">0.0</span>
    <span class="k">return</span> <span class="n">transparent</span></div>


<div class="viewcode-block" id="fill_equal"><a class="viewcode-back" href="../../api/kiva.basecore2d.html#kiva.basecore2d.fill_equal">[docs]</a><span class="k">def</span> <span class="nf">fill_equal</span><span class="p">(</span><span class="n">fill1</span><span class="p">,</span> <span class="n">fill2</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Compares the two fill colors. &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">alltrue</span><span class="p">(</span><span class="n">fill1</span> <span class="o">==</span> <span class="n">fill2</span><span class="p">)</span></div>


<div class="viewcode-block" id="GraphicsContextBase"><a class="viewcode-back" href="../../api/kiva.basecore2d.html#kiva.basecore2d.GraphicsContextBase">[docs]</a><span class="k">class</span> <span class="nc">GraphicsContextBase</span><span class="p">(</span><span class="n">AbstractGraphicsContext</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Concrete base implementation of a GraphicsContext</span>

<span class="sd">    Attributes</span>
<span class="sd">    ----------</span>

<span class="sd">    state</span>
<span class="sd">        Current state of graphics context.</span>
<span class="sd">    state_stack</span>
<span class="sd">        Stack used to save graphics states</span>
<span class="sd">    path</span>
<span class="sd">        The drawing path.</span>
<span class="sd">    active_subpath</span>
<span class="sd">        The active drawing subpath</span>

<span class="sd">    This class needs to be sub-classed by device types that handle</span>
<span class="sd">    drawing but don&#39;t handle more advanced concepts like paths, graphics state,</span>
<span class="sd">    and coordinate transformations.</span>

<span class="sd">    This class can also be used as a null backend for testing purposes.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">GraphicsContextBase</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">state</span> <span class="o">=</span> <span class="n">GraphicsState</span><span class="p">()</span>

        <span class="c1"># The line state has multiple properties that are tracked by a class</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">last_drawn_line_state</span> <span class="o">=</span> <span class="n">LineState</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

        <span class="c1"># The fill state is simply a color.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">last_drawn_fill_state</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">last_font_state</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="c1"># Used by save/restore state.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">state_stack</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="c1"># Variables for used in drawing paths.</span>
        <span class="c1"># The path_transform_indices holds a list of indices pointing into</span>
        <span class="c1"># active_subpath that affect the ctm.  It is necessary to preserve</span>
        <span class="c1"># these across begin_path calls.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">active_subpath</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">path_transform_indices</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">path</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">active_subpath</span><span class="p">]</span>

        <span class="c1"># Whether the particular underlying graphics context considers the</span>
        <span class="c1"># &quot;origin&quot; of a pixel to be the center of the pixel or the lower-left</span>
        <span class="c1"># corner.  Most vector-based drawing systems consider the origin to</span>
        <span class="c1"># be at the corner, whereas most raster systems place the origin at</span>
        <span class="c1"># the center.</span>
        <span class="c1">#</span>
        <span class="c1"># This is ultimately used to determine whether certain methods should</span>
        <span class="c1"># automatically tack on a (0.5, 0.5) offset.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">corner_pixel_origin</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="c1"># --------------------------------------------------------------------</span>
        <span class="c1"># We&#39;re currently maintaining a couple of copies of the ctm around.</span>
        <span class="c1"># The state.ctm is used mainly for user querying, etc.  We also have</span>
        <span class="c1"># something called the device_ctm which is actually used in the</span>
        <span class="c1"># drawing of objects.  In some implementation (OpenGL), the</span>
        <span class="c1"># device_ctm is actually maintained in hardware.</span>
        <span class="c1"># --------------------------------------------------------------------</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">device_prepare_device_ctm</span><span class="p">()</span>

    <span class="c1"># ------------------------------------------------------------------------</span>
    <span class="c1"># Coordinate Transform Matrix Manipulation</span>
    <span class="c1">#</span>
    <span class="c1"># Note:  I&#39;m not sure we really need to keep the state.ctm around now</span>
    <span class="c1">#        that we&#39;re keeping the device_ctm around, but I&#39;m reluctant to</span>
    <span class="c1">#        unify the two yet.  I think it can (and probably should) be done</span>
    <span class="c1">#        though.</span>
    <span class="c1"># ------------------------------------------------------------------------</span>

<div class="viewcode-block" id="GraphicsContextBase.scale_ctm"><a class="viewcode-back" href="../../api/kiva.basecore2d.html#kiva.basecore2d.GraphicsContextBase.scale_ctm">[docs]</a>    <span class="k">def</span> <span class="nf">scale_ctm</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sx</span><span class="p">,</span> <span class="n">sy</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Sets the coordinate system scale to the given values, (sx, sy).</span>

<span class="sd">            Parameters</span>
<span class="sd">            ----------</span>
<span class="sd">            sx : float</span>
<span class="sd">                The new scale factor for the x axis</span>
<span class="sd">            sy : float</span>
<span class="sd">                The new scale factor for the y axis</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">ctm</span> <span class="o">=</span> <span class="n">affine</span><span class="o">.</span><span class="n">scale</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">ctm</span><span class="p">,</span> <span class="n">sx</span><span class="p">,</span> <span class="n">sy</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">active_subpath</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">SCALE_CTM</span><span class="p">,</span> <span class="p">(</span><span class="n">sx</span><span class="p">,</span> <span class="n">sy</span><span class="p">)))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">path_transform_indices</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">active_subpath</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span></div>

<div class="viewcode-block" id="GraphicsContextBase.translate_ctm"><a class="viewcode-back" href="../../api/kiva.basecore2d.html#kiva.basecore2d.GraphicsContextBase.translate_ctm">[docs]</a>    <span class="k">def</span> <span class="nf">translate_ctm</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tx</span><span class="p">,</span> <span class="n">ty</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Translates the coordinate system by the value given by (tx, ty)</span>

<span class="sd">            Parameters</span>
<span class="sd">            ----------</span>
<span class="sd">            tx : float</span>
<span class="sd">                The distance to move in the x direction</span>
<span class="sd">            ty : float</span>
<span class="sd">                The distance to move in the y direction</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">ctm</span> <span class="o">=</span> <span class="n">affine</span><span class="o">.</span><span class="n">translate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">ctm</span><span class="p">,</span> <span class="n">tx</span><span class="p">,</span> <span class="n">ty</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">active_subpath</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">TRANSLATE_CTM</span><span class="p">,</span> <span class="p">(</span><span class="n">tx</span><span class="p">,</span> <span class="n">ty</span><span class="p">)))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">path_transform_indices</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">active_subpath</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span></div>

<div class="viewcode-block" id="GraphicsContextBase.rotate_ctm"><a class="viewcode-back" href="../../api/kiva.basecore2d.html#kiva.basecore2d.GraphicsContextBase.rotate_ctm">[docs]</a>    <span class="k">def</span> <span class="nf">rotate_ctm</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">angle</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Rotates the coordinate space for drawing by the given angle.</span>

<span class="sd">            Parameters</span>
<span class="sd">            ----------</span>
<span class="sd">            angle : float</span>
<span class="sd">                the angle, in radians, to rotate the coordinate system</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">ctm</span> <span class="o">=</span> <span class="n">affine</span><span class="o">.</span><span class="n">rotate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">ctm</span><span class="p">,</span> <span class="n">angle</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">active_subpath</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">ROTATE_CTM</span><span class="p">,</span> <span class="p">(</span><span class="n">angle</span><span class="p">,)))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">path_transform_indices</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">active_subpath</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span></div>

<div class="viewcode-block" id="GraphicsContextBase.concat_ctm"><a class="viewcode-back" href="../../api/kiva.basecore2d.html#kiva.basecore2d.GraphicsContextBase.concat_ctm">[docs]</a>    <span class="k">def</span> <span class="nf">concat_ctm</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">transform</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Concatenates the transform to current coordinate transform matrix.</span>

<span class="sd">            Parameters</span>
<span class="sd">            ----------</span>
<span class="sd">            transform : affine_matrix</span>
<span class="sd">                the transform matrix to concatenate with</span>
<span class="sd">                the current coordinate matrix.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">ctm</span> <span class="o">=</span> <span class="n">affine</span><span class="o">.</span><span class="n">concat</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">ctm</span><span class="p">,</span> <span class="n">transform</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">active_subpath</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">CONCAT_CTM</span><span class="p">,</span> <span class="p">(</span><span class="n">transform</span><span class="p">,)))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">path_transform_indices</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">active_subpath</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span></div>

<div class="viewcode-block" id="GraphicsContextBase.get_ctm"><a class="viewcode-back" href="../../api/kiva.basecore2d.html#kiva.basecore2d.GraphicsContextBase.get_ctm">[docs]</a>    <span class="k">def</span> <span class="nf">get_ctm</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns the current coordinate transform matrix.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">ctm</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span></div>

<div class="viewcode-block" id="GraphicsContextBase.set_ctm"><a class="viewcode-back" href="../../api/kiva.basecore2d.html#kiva.basecore2d.GraphicsContextBase.set_ctm">[docs]</a>    <span class="k">def</span> <span class="nf">set_ctm</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">transform</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns the current coordinate transform matrix.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">ctm</span> <span class="o">=</span> <span class="n">transform</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">active_subpath</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">LOAD_CTM</span><span class="p">,</span> <span class="p">(</span><span class="n">transform</span><span class="p">,)))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">path_transform_indices</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">active_subpath</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span></div>

    <span class="c1"># ----------------------------------------------------------------</span>
    <span class="c1"># Save/Restore graphics state.</span>
    <span class="c1"># ----------------------------------------------------------------</span>

<div class="viewcode-block" id="GraphicsContextBase.save_state"><a class="viewcode-back" href="../../api/kiva.basecore2d.html#kiva.basecore2d.GraphicsContextBase.save_state">[docs]</a>    <span class="k">def</span> <span class="nf">save_state</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Saves the current graphic&#39;s context state.</span>

<span class="sd">        Always pair this with a `restore_state()`, for example using</span>
<span class="sd">        try ... finally ... or the context manager interface.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">state_stack</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">state</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span></div>

<div class="viewcode-block" id="GraphicsContextBase.restore_state"><a class="viewcode-back" href="../../api/kiva.basecore2d.html#kiva.basecore2d.GraphicsContextBase.restore_state">[docs]</a>    <span class="k">def</span> <span class="nf">restore_state</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Restores the previous graphics state. &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">state</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">state_stack</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">active_subpath</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">LOAD_CTM</span><span class="p">,</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">ctm</span><span class="p">,)))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">path_transform_indices</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">active_subpath</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span></div>

    <span class="c1"># ----------------------------------------------------------------</span>
    <span class="c1"># context manager interface</span>
    <span class="c1"># ----------------------------------------------------------------</span>

    <span class="k">def</span> <span class="nf">__enter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">save_state</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">__exit__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">type</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">traceback</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">restore_state</span><span class="p">()</span>

    <span class="c1"># ----------------------------------------------------------------</span>
    <span class="c1"># Manipulate graphics state attributes.</span>
    <span class="c1"># ----------------------------------------------------------------</span>

<div class="viewcode-block" id="GraphicsContextBase.set_antialias"><a class="viewcode-back" href="../../api/kiva.basecore2d.html#kiva.basecore2d.GraphicsContextBase.set_antialias">[docs]</a>    <span class="k">def</span> <span class="nf">set_antialias</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Sets/Unsets anti-aliasing for bitmap graphics context.</span>

<span class="sd">        Ignored on most platforms.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">antialias</span> <span class="o">=</span> <span class="n">value</span></div>

<div class="viewcode-block" id="GraphicsContextBase.get_antialias"><a class="viewcode-back" href="../../api/kiva.basecore2d.html#kiva.basecore2d.GraphicsContextBase.get_antialias">[docs]</a>    <span class="k">def</span> <span class="nf">get_antialias</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns the anti-aliasing for bitmap graphics context.</span>

<span class="sd">        Ignored on most platforms.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">antialias</span></div>

<div class="viewcode-block" id="GraphicsContextBase.set_image_interpolation"><a class="viewcode-back" href="../../api/kiva.basecore2d.html#kiva.basecore2d.GraphicsContextBase.set_image_interpolation">[docs]</a>    <span class="k">def</span> <span class="nf">set_image_interpolation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Sets image interpolation for bitmap graphics context.</span>

<span class="sd">        Ignored on most platforms.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">image_interpolation</span> <span class="o">=</span> <span class="n">value</span></div>

<div class="viewcode-block" id="GraphicsContextBase.get_image_interpolation"><a class="viewcode-back" href="../../api/kiva.basecore2d.html#kiva.basecore2d.GraphicsContextBase.get_image_interpolation">[docs]</a>    <span class="k">def</span> <span class="nf">get_image_interpolation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Sets/Unsets anti-aliasing for bitmap graphics context.</span>

<span class="sd">        Ignored on most platforms.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">image_interpolation</span></div>

<div class="viewcode-block" id="GraphicsContextBase.set_line_width"><a class="viewcode-back" href="../../api/kiva.basecore2d.html#kiva.basecore2d.GraphicsContextBase.set_line_width">[docs]</a>    <span class="k">def</span> <span class="nf">set_line_width</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">width</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Sets the line width for drawing</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        width : float</span>
<span class="sd">            The new width for lines in user space units.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">line_state</span><span class="o">.</span><span class="n">line_width</span> <span class="o">=</span> <span class="n">width</span></div>

<div class="viewcode-block" id="GraphicsContextBase.set_line_join"><a class="viewcode-back" href="../../api/kiva.basecore2d.html#kiva.basecore2d.GraphicsContextBase.set_line_join">[docs]</a>    <span class="k">def</span> <span class="nf">set_line_join</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">style</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Sets the style for joining lines in a drawing.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        style : join_style</span>
<span class="sd">            The line joining style.  The available</span>
<span class="sd">            styles are JOIN_ROUND, JOIN_BEVEL, JOIN_MITER.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">style</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">(</span><span class="n">JOIN_ROUND</span><span class="p">,</span> <span class="n">JOIN_BEVEL</span><span class="p">,</span> <span class="n">JOIN_MITER</span><span class="p">):</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;Invalid line join style. See documentation for valid styles&quot;</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">line_state</span><span class="o">.</span><span class="n">line_join</span> <span class="o">=</span> <span class="n">style</span></div>

<div class="viewcode-block" id="GraphicsContextBase.set_miter_limit"><a class="viewcode-back" href="../../api/kiva.basecore2d.html#kiva.basecore2d.GraphicsContextBase.set_miter_limit">[docs]</a>    <span class="k">def</span> <span class="nf">set_miter_limit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">limit</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Specifies limits on line lengths for mitering line joins.</span>

<span class="sd">        If line_join is set to miter joins, the limit specifies which</span>
<span class="sd">        line joins should actually be mitered.  If lines are not mitered,</span>
<span class="sd">        they are joined with a bevel.  The line width is divided by</span>
<span class="sd">        the length of the miter.  If the result is greater than the</span>
<span class="sd">        limit, the bevel style is used.</span>

<span class="sd">        This is not implemented on most platforms.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        limit : float</span>
<span class="sd">            limit for mitering joins. defaults to 1.0.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">miter_limit</span> <span class="o">=</span> <span class="n">limit</span></div>

<div class="viewcode-block" id="GraphicsContextBase.set_line_cap"><a class="viewcode-back" href="../../api/kiva.basecore2d.html#kiva.basecore2d.GraphicsContextBase.set_line_cap">[docs]</a>    <span class="k">def</span> <span class="nf">set_line_cap</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">style</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Specifies the style of endings to put on line ends.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        style : cap_style</span>
<span class="sd">            The line cap style to use. Available styles</span>
<span class="sd">            are CAP_ROUND, CAP_BUTT, CAP_SQUARE.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">style</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">(</span><span class="n">CAP_ROUND</span><span class="p">,</span> <span class="n">CAP_BUTT</span><span class="p">,</span> <span class="n">CAP_SQUARE</span><span class="p">):</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;Invalid line cap style.  See documentation for valid styles&quot;</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">line_state</span><span class="o">.</span><span class="n">line_cap</span> <span class="o">=</span> <span class="n">style</span></div>

<div class="viewcode-block" id="GraphicsContextBase.set_line_dash"><a class="viewcode-back" href="../../api/kiva.basecore2d.html#kiva.basecore2d.GraphicsContextBase.set_line_dash">[docs]</a>    <span class="k">def</span> <span class="nf">set_line_dash</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pattern</span><span class="p">,</span> <span class="n">phase</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Sets the line dash pattern and phase for line painting.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        pattern : float array</span>
<span class="sd">            An array of floating point values</span>
<span class="sd">            specifing the lengths of on/off painting</span>
<span class="sd">            pattern for lines.</span>
<span class="sd">        phase : float</span>
<span class="sd">            Specifies how many units into dash pattern</span>
<span class="sd">            to start.  phase defaults to 0.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">alltrue</span><span class="p">(</span><span class="n">pattern</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">line_state</span><span class="o">.</span><span class="n">line_dash</span> <span class="o">=</span> <span class="n">NO_DASH</span>
            <span class="k">return</span>
        <span class="n">pattern</span> <span class="o">=</span> <span class="n">asarray</span><span class="p">(</span><span class="n">pattern</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">pattern</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;dash pattern should have at least two entries.&quot;</span><span class="p">)</span>
        <span class="c1"># not sure if this check is really needed.</span>
        <span class="k">if</span> <span class="n">phase</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;dash phase should be a positive value.&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">line_state</span><span class="o">.</span><span class="n">line_dash</span> <span class="o">=</span> <span class="p">(</span><span class="n">phase</span><span class="p">,</span> <span class="n">pattern</span><span class="p">)</span></div>

<div class="viewcode-block" id="GraphicsContextBase.set_flatness"><a class="viewcode-back" href="../../api/kiva.basecore2d.html#kiva.basecore2d.GraphicsContextBase.set_flatness">[docs]</a>    <span class="k">def</span> <span class="nf">set_flatness</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">flatness</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Not implemented</span>

<span class="sd">        It is device dependent and therefore not recommended by</span>
<span class="sd">        the PDF documentation.</span>

<span class="sd">        flatness determines how accurately curves are rendered.  Setting it</span>
<span class="sd">        to values less than one will result in more accurate drawings, but</span>
<span class="sd">        they take longer.  It defaults to None</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">flatness</span> <span class="o">=</span> <span class="n">flatness</span></div>

    <span class="c1"># ----------------------------------------------------------------</span>
    <span class="c1"># Sending drawing data to a device</span>
    <span class="c1"># ----------------------------------------------------------------</span>

<div class="viewcode-block" id="GraphicsContextBase.flush"><a class="viewcode-back" href="../../api/kiva.basecore2d.html#kiva.basecore2d.GraphicsContextBase.flush">[docs]</a>    <span class="k">def</span> <span class="nf">flush</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Sends all drawing data to the destination device. &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="GraphicsContextBase.synchronize"><a class="viewcode-back" href="../../api/kiva.basecore2d.html#kiva.basecore2d.GraphicsContextBase.synchronize">[docs]</a>    <span class="k">def</span> <span class="nf">synchronize</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Prepares drawing data to be updated on a destination device.</span>

<span class="sd">        Currently this is a NOP for all implementations.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

    <span class="c1"># ----------------------------------------------------------------</span>
    <span class="c1"># Page Definitions</span>
    <span class="c1"># ----------------------------------------------------------------</span>

<div class="viewcode-block" id="GraphicsContextBase.begin_page"><a class="viewcode-back" href="../../api/kiva.basecore2d.html#kiva.basecore2d.GraphicsContextBase.begin_page">[docs]</a>    <span class="k">def</span> <span class="nf">begin_page</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Creates a new page within the graphics context.</span>

<span class="sd">        Currently this is a NOP for all implementations.  The PDF</span>
<span class="sd">        backend should probably implement it, but the ReportLab</span>
<span class="sd">        Canvas uses the showPage() method to handle both</span>
<span class="sd">        begin_page and end_page issues.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="GraphicsContextBase.end_page"><a class="viewcode-back" href="../../api/kiva.basecore2d.html#kiva.basecore2d.GraphicsContextBase.end_page">[docs]</a>    <span class="k">def</span> <span class="nf">end_page</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Ends drawing in the current page of the graphics context.</span>

<span class="sd">        Currently this is a NOP for all implementations.  The PDF</span>
<span class="sd">        backend should probably implement it, but the ReportLab</span>
<span class="sd">        Canvas uses the showPage() method to handle both</span>
<span class="sd">        begin_page and end_page issues.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

    <span class="c1"># ----------------------------------------------------------------</span>
    <span class="c1"># Building paths (contours that are drawn)</span>
    <span class="c1">#</span>
    <span class="c1"># + Currently, nothing is drawn as the path is built.  Instead, the</span>
    <span class="c1">#   instructions are stored and later drawn.  Should this be changed?</span>
    <span class="c1">#   We will likely draw to a buffer instead of directly to the canvas</span>
    <span class="c1">#   anyway.</span>
    <span class="c1">#</span>
    <span class="c1">#   Hmmm. No.  We have to keep the path around for storing as a</span>
    <span class="c1">#   clipping region and things like that.</span>
    <span class="c1">#</span>
    <span class="c1"># + I think we should keep the current_path_point hanging around.</span>
    <span class="c1">#</span>
    <span class="c1"># ----------------------------------------------------------------</span>

<div class="viewcode-block" id="GraphicsContextBase.begin_path"><a class="viewcode-back" href="../../api/kiva.basecore2d.html#kiva.basecore2d.GraphicsContextBase.begin_path">[docs]</a>    <span class="k">def</span> <span class="nf">begin_path</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Clears the current drawing path and begin a new one.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Need to check here if the current subpath contains matrix</span>
        <span class="c1"># transforms.  If  it does, pull these out, and stick them</span>
        <span class="c1"># in the new subpath.</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">path_transform_indices</span><span class="p">:</span>
            <span class="n">path_arr</span> <span class="o">=</span> <span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">active_subpath</span><span class="p">,</span> <span class="nb">object</span><span class="p">)</span>
            <span class="n">tf</span> <span class="o">=</span> <span class="n">path_arr</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">path_transform_indices</span><span class="p">,</span> <span class="p">:]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">path_transform_indices</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">tf</span><span class="p">)))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">active_subpath</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">tf</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">active_subpath</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">path</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">active_subpath</span><span class="p">]</span></div>

<div class="viewcode-block" id="GraphicsContextBase.move_to"><a class="viewcode-back" href="../../api/kiva.basecore2d.html#kiva.basecore2d.GraphicsContextBase.move_to">[docs]</a>    <span class="k">def</span> <span class="nf">move_to</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Starts a new drawing subpath and place the current point at (x, y).</span>

<span class="sd">            Notes:</span>
<span class="sd">                Not sure how to treat state.current_point.  Should it be the</span>
<span class="sd">                value of the point before or after the matrix transformation?</span>
<span class="sd">                It looks like before in the PDF specs.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_new_subpath</span><span class="p">()</span>

        <span class="n">pt</span> <span class="o">=</span> <span class="n">array</span><span class="p">((</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="n">float64</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">current_point</span> <span class="o">=</span> <span class="n">pt</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">active_subpath</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">POINT</span><span class="p">,</span> <span class="n">pt</span><span class="p">))</span></div>

<div class="viewcode-block" id="GraphicsContextBase.line_to"><a class="viewcode-back" href="../../api/kiva.basecore2d.html#kiva.basecore2d.GraphicsContextBase.line_to">[docs]</a>    <span class="k">def</span> <span class="nf">line_to</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Adds a line from the current point to the given point (x, y).</span>

<span class="sd">            The current point is moved to (x, y).</span>

<span class="sd">            What should happen if move_to hasn&#39;t been called? Should it always</span>
<span class="sd">            begin at (0, 0) or raise an error?</span>

<span class="sd">            Notes:</span>
<span class="sd">                See note in move_to about the current_point.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">pt</span> <span class="o">=</span> <span class="n">array</span><span class="p">((</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="n">float64</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">current_point</span> <span class="o">=</span> <span class="n">pt</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">active_subpath</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">LINE</span><span class="p">,</span> <span class="n">pt</span><span class="p">))</span></div>

<div class="viewcode-block" id="GraphicsContextBase.lines"><a class="viewcode-back" href="../../api/kiva.basecore2d.html#kiva.basecore2d.GraphicsContextBase.lines">[docs]</a>    <span class="k">def</span> <span class="nf">lines</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">points</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Adds a series of lines as a new subpath.</span>

<span class="sd">            Parameters</span>
<span class="sd">            ----------</span>

<span class="sd">            points</span>
<span class="sd">                an Nx2 array of x, y pairs</span>

<span class="sd">            The current_point is moved to the last point in &#39;points&#39;</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_new_subpath</span><span class="p">()</span>
        <span class="n">pts</span> <span class="o">=</span> <span class="n">points</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">active_subpath</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">LINES</span><span class="p">,</span> <span class="n">pts</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">current_point</span> <span class="o">=</span> <span class="n">points</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span></div>

<div class="viewcode-block" id="GraphicsContextBase.line_set"><a class="viewcode-back" href="../../api/kiva.basecore2d.html#kiva.basecore2d.GraphicsContextBase.line_set">[docs]</a>    <span class="k">def</span> <span class="nf">line_set</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">starts</span><span class="p">,</span> <span class="n">ends</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Adds a set of disjoint lines as a new subpath.</span>

<span class="sd">            Parameters</span>
<span class="sd">            ----------</span>
<span class="sd">            starts</span>
<span class="sd">                an Nx2 array of x, y pairs</span>
<span class="sd">            ends</span>
<span class="sd">                an Nx2 array of x, y pairs</span>

<span class="sd">            Starts and ends should have the same length.</span>
<span class="sd">            The current point is moved to the last point in &#39;ends&#39;.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_new_subpath</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">min</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">starts</span><span class="p">),</span> <span class="nb">len</span><span class="p">(</span><span class="n">ends</span><span class="p">))):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">active_subpath</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">POINT</span><span class="p">,</span> <span class="n">starts</span><span class="p">[</span><span class="n">i</span><span class="p">]))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">active_subpath</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">LINE</span><span class="p">,</span> <span class="n">ends</span><span class="p">[</span><span class="n">i</span><span class="p">]))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">current_point</span> <span class="o">=</span> <span class="n">ends</span><span class="p">[</span><span class="n">i</span><span class="p">]</span></div>

<div class="viewcode-block" id="GraphicsContextBase.rect"><a class="viewcode-back" href="../../api/kiva.basecore2d.html#kiva.basecore2d.GraphicsContextBase.rect">[docs]</a>    <span class="k">def</span> <span class="nf">rect</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">sx</span><span class="p">,</span> <span class="n">sy</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Adds a rectangle as a new subpath.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">pts</span> <span class="o">=</span> <span class="n">array</span><span class="p">(((</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">),</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">+</span> <span class="n">sy</span><span class="p">),</span> <span class="p">(</span><span class="n">x</span> <span class="o">+</span> <span class="n">sx</span><span class="p">,</span> <span class="n">y</span> <span class="o">+</span> <span class="n">sy</span><span class="p">),</span> <span class="p">(</span><span class="n">x</span> <span class="o">+</span> <span class="n">sx</span><span class="p">,</span> <span class="n">y</span><span class="p">)))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lines</span><span class="p">(</span><span class="n">pts</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">close_path</span><span class="p">(</span><span class="s2">&quot;rect&quot;</span><span class="p">)</span></div>

<div class="viewcode-block" id="GraphicsContextBase.draw_rect"><a class="viewcode-back" href="../../api/kiva.basecore2d.html#kiva.basecore2d.GraphicsContextBase.draw_rect">[docs]</a>    <span class="k">def</span> <span class="nf">draw_rect</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rect</span><span class="p">,</span> <span class="n">mode</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rect</span><span class="p">(</span><span class="o">*</span><span class="n">rect</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">draw_path</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="n">mode</span><span class="p">)</span></div>

<div class="viewcode-block" id="GraphicsContextBase.rects"><a class="viewcode-back" href="../../api/kiva.basecore2d.html#kiva.basecore2d.GraphicsContextBase.rects">[docs]</a>    <span class="k">def</span> <span class="nf">rects</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rects</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Adds multiple rectangles as separate subpaths to the path.</span>

<span class="sd">            Not very efficient -- calls rect multiple times.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">sx</span><span class="p">,</span> <span class="n">sy</span> <span class="ow">in</span> <span class="n">rects</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">rect</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">sx</span><span class="p">,</span> <span class="n">sy</span><span class="p">)</span></div>

<div class="viewcode-block" id="GraphicsContextBase.close_path"><a class="viewcode-back" href="../../api/kiva.basecore2d.html#kiva.basecore2d.GraphicsContextBase.close_path">[docs]</a>    <span class="k">def</span> <span class="nf">close_path</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tag</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Closes the path of the current subpath.</span>

<span class="sd">            Currently starts a new subpath -- is this what we want?</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">active_subpath</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">CLOSE</span><span class="p">,</span> <span class="p">(</span><span class="n">tag</span><span class="p">,)))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_new_subpath</span><span class="p">()</span></div>

<div class="viewcode-block" id="GraphicsContextBase.curve_to"><a class="viewcode-back" href="../../api/kiva.basecore2d.html#kiva.basecore2d.GraphicsContextBase.curve_to">[docs]</a>    <span class="k">def</span> <span class="nf">curve_to</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x_ctrl1</span><span class="p">,</span> <span class="n">y_ctrl1</span><span class="p">,</span> <span class="n">x_ctrl2</span><span class="p">,</span> <span class="n">y_ctrl2</span><span class="p">,</span> <span class="n">x_to</span><span class="p">,</span> <span class="n">y_to</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Draw a cubic bezier curve from the current point.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        x_ctrl1 : float</span>
<span class="sd">            X-value of the first control point.</span>
<span class="sd">        y_ctrl1 : float</span>
<span class="sd">            Y-value of the first control point.</span>
<span class="sd">        x_ctrl2 : float</span>
<span class="sd">            X-value of the second control point.</span>
<span class="sd">        y_ctrl2 : float</span>
<span class="sd">            Y-value of the second control point.</span>
<span class="sd">        x_to : float</span>
<span class="sd">            X-value of the ending point of the curve.</span>
<span class="sd">        y_to : float</span>
<span class="sd">            Y-value of the ending point of the curve.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># XXX: figure out a reasonable number of points from the current scale</span>
        <span class="c1"># and arc length. Since the arc length is expensive to calculate, the</span>
        <span class="c1"># sum of the lengths of the line segments from (xy0, xy_ctrl1),</span>
        <span class="c1"># (xy_ctrl1, xy_ctrl2), and (xy_ctrl2, xy_to) would be a reasonable</span>
        <span class="c1"># approximation.</span>
        <span class="n">n</span> <span class="o">=</span> <span class="mi">100</span>
        <span class="n">t</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">n</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">/</span> <span class="nb">float</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
        <span class="n">t2</span> <span class="o">=</span> <span class="n">t</span> <span class="o">*</span> <span class="n">t</span>
        <span class="n">t3</span> <span class="o">=</span> <span class="n">t2</span> <span class="o">*</span> <span class="n">t</span>
        <span class="n">u</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">-</span> <span class="n">t</span>
        <span class="n">u2</span> <span class="o">=</span> <span class="n">u</span> <span class="o">*</span> <span class="n">u</span>
        <span class="n">u3</span> <span class="o">=</span> <span class="n">u2</span> <span class="o">*</span> <span class="n">u</span>
        <span class="n">x0</span><span class="p">,</span> <span class="n">y0</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">current_point</span>
        <span class="n">pts</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">column_stack</span><span class="p">(</span>
            <span class="p">[</span>
                <span class="n">x0</span><span class="o">*</span><span class="n">u3</span> <span class="o">+</span> <span class="mi">3</span><span class="o">*</span><span class="p">(</span><span class="n">x_ctrl1</span><span class="o">*</span><span class="n">t</span><span class="o">*</span><span class="n">u2</span> <span class="o">+</span> <span class="n">x_ctrl2</span><span class="o">*</span><span class="n">t2</span><span class="o">*</span><span class="n">u</span><span class="p">)</span> <span class="o">+</span> <span class="n">x_to</span><span class="o">*</span><span class="n">t3</span><span class="p">,</span>
                <span class="n">y0</span><span class="o">*</span><span class="n">u3</span> <span class="o">+</span> <span class="mi">3</span><span class="o">*</span><span class="p">(</span><span class="n">y_ctrl1</span><span class="o">*</span><span class="n">t</span><span class="o">*</span><span class="n">u2</span> <span class="o">+</span> <span class="n">y_ctrl2</span><span class="o">*</span><span class="n">t2</span><span class="o">*</span><span class="n">u</span><span class="p">)</span> <span class="o">+</span> <span class="n">y_to</span><span class="o">*</span><span class="n">t3</span><span class="p">,</span>
            <span class="p">]</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">active_subpath</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">LINES</span><span class="p">,</span> <span class="n">pts</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">current_point</span> <span class="o">=</span> <span class="n">pts</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span></div>

<div class="viewcode-block" id="GraphicsContextBase.quad_curve_to"><a class="viewcode-back" href="../../api/kiva.basecore2d.html#kiva.basecore2d.GraphicsContextBase.quad_curve_to">[docs]</a>    <span class="k">def</span> <span class="nf">quad_curve_to</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x_ctrl</span><span class="p">,</span> <span class="n">y_ctrl</span><span class="p">,</span> <span class="n">x_to</span><span class="p">,</span> <span class="n">y_to</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Draw a quadratic bezier curve from the current point.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        x_ctrl : float</span>
<span class="sd">            X-value of the control point</span>
<span class="sd">        y_ctrl : float</span>
<span class="sd">            Y-value of the control point.</span>
<span class="sd">        x_to : float</span>
<span class="sd">            X-value of the ending point of the curve</span>
<span class="sd">        y_to : float</span>
<span class="sd">            Y-value of the ending point of the curve.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># A quadratic Bezier curve is just a special case of the cubic. Reuse</span>
        <span class="c1"># its implementation in case it has been implemented for the specific</span>
        <span class="c1"># backend.</span>
        <span class="n">x0</span><span class="p">,</span> <span class="n">y0</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">current_point</span>
        <span class="n">xc1</span> <span class="o">=</span> <span class="p">(</span><span class="n">x0</span> <span class="o">+</span> <span class="n">x_ctrl</span> <span class="o">+</span> <span class="n">x_ctrl</span><span class="p">)</span> <span class="o">/</span> <span class="mf">3.0</span>
        <span class="n">yc1</span> <span class="o">=</span> <span class="p">(</span><span class="n">y0</span> <span class="o">+</span> <span class="n">y_ctrl</span> <span class="o">+</span> <span class="n">y_ctrl</span><span class="p">)</span> <span class="o">/</span> <span class="mf">3.0</span>
        <span class="n">xc2</span> <span class="o">=</span> <span class="p">(</span><span class="n">x_to</span> <span class="o">+</span> <span class="n">x_ctrl</span> <span class="o">+</span> <span class="n">x_ctrl</span><span class="p">)</span> <span class="o">/</span> <span class="mf">3.0</span>
        <span class="n">yc2</span> <span class="o">=</span> <span class="p">(</span><span class="n">y_to</span> <span class="o">+</span> <span class="n">y_ctrl</span> <span class="o">+</span> <span class="n">y_ctrl</span><span class="p">)</span> <span class="o">/</span> <span class="mf">3.0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">curve_to</span><span class="p">(</span><span class="n">xc1</span><span class="p">,</span> <span class="n">yc1</span><span class="p">,</span> <span class="n">xc2</span><span class="p">,</span> <span class="n">yc2</span><span class="p">,</span> <span class="n">x_to</span><span class="p">,</span> <span class="n">y_to</span><span class="p">)</span></div>

<div class="viewcode-block" id="GraphicsContextBase.arc"><a class="viewcode-back" href="../../api/kiva.basecore2d.html#kiva.basecore2d.GraphicsContextBase.arc">[docs]</a>    <span class="k">def</span> <span class="nf">arc</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">radius</span><span class="p">,</span> <span class="n">start_angle</span><span class="p">,</span> <span class="n">end_angle</span><span class="p">,</span> <span class="n">cw</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Draw a circular arc.</span>

<span class="sd">        If there is a current path and the current point is not the initial</span>
<span class="sd">        point of the arc, a line will be drawn to the start of the arc. If</span>
<span class="sd">        there is no current path, then no line will be drawn.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        x : float</span>
<span class="sd">            X-value of the center of the arc.</span>
<span class="sd">        y : float</span>
<span class="sd">            Y-value of the center of the arc.</span>
<span class="sd">        radius : float</span>
<span class="sd">            The radius of the arc.</span>
<span class="sd">        start_angle : float</span>
<span class="sd">            The angle, in radians, that the starting point makes with respect</span>
<span class="sd">            to the positive X-axis from the center point.</span>
<span class="sd">        end_angle : float</span>
<span class="sd">            The angles, in radians, that the final point makes with</span>
<span class="sd">            respect to the positive X-axis from the center point.</span>
<span class="sd">        cw : bool, optional</span>
<span class="sd">            Whether the arc should be drawn clockwise or not.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># XXX: pick the number of line segments based on the current scale and</span>
        <span class="c1"># the radius.</span>
        <span class="n">n</span> <span class="o">=</span> <span class="mi">100</span>
        <span class="k">if</span> <span class="n">end_angle</span> <span class="o">&lt;</span> <span class="n">start_angle</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">cw</span><span class="p">:</span>
            <span class="n">end_angle</span> <span class="o">+=</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">pi</span>
        <span class="k">elif</span> <span class="n">start_angle</span> <span class="o">&lt;</span> <span class="n">end_angle</span> <span class="ow">and</span> <span class="n">cw</span><span class="p">:</span>
            <span class="n">start_angle</span> <span class="o">+=</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">pi</span>
        <span class="n">theta</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="n">start_angle</span><span class="p">,</span> <span class="n">end_angle</span><span class="p">,</span> <span class="n">n</span><span class="p">)</span>
        <span class="n">pts</span> <span class="o">=</span> <span class="n">radius</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">column_stack</span><span class="p">([</span><span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">theta</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">theta</span><span class="p">)])</span>
        <span class="n">pts</span> <span class="o">+=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">active_subpath</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">LINES</span><span class="p">,</span> <span class="n">pts</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">current_point</span> <span class="o">=</span> <span class="n">pts</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span></div>

<div class="viewcode-block" id="GraphicsContextBase.arc_to"><a class="viewcode-back" href="../../api/kiva.basecore2d.html#kiva.basecore2d.GraphicsContextBase.arc_to">[docs]</a>    <span class="k">def</span> <span class="nf">arc_to</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x1</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="n">x2</span><span class="p">,</span> <span class="n">y2</span><span class="p">,</span> <span class="n">radius</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">&quot;arc_to is not implemented&quot;</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="nf">_new_subpath</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Starts a new drawing subpath.</span>

<span class="sd">            Only creates a new subpath if the current one contains objects.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">active_subpath</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">active_subpath</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">path_transform_indices</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">active_subpath</span><span class="p">)</span>

    <span class="c1"># ----------------------------------------------------------------</span>
    <span class="c1"># Getting infomration on paths</span>
    <span class="c1"># ----------------------------------------------------------------</span>

<div class="viewcode-block" id="GraphicsContextBase.is_path_empty"><a class="viewcode-back" href="../../api/kiva.basecore2d.html#kiva.basecore2d.GraphicsContextBase.is_path_empty">[docs]</a>    <span class="k">def</span> <span class="nf">is_path_empty</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Tests to see whether the current drawing path is empty</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># If the first subpath is empty, then the path is empty</span>
        <span class="n">res</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>
            <span class="n">res</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">res</span> <span class="o">=</span> <span class="mi">1</span>
            <span class="k">for</span> <span class="n">sub</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="p">:</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">is_point</span><span class="p">(</span><span class="n">sub</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]):</span>
                    <span class="n">res</span> <span class="o">=</span> <span class="mi">0</span>
                    <span class="k">break</span>
        <span class="k">return</span> <span class="n">res</span></div>

<div class="viewcode-block" id="GraphicsContextBase.get_path_current_point"><a class="viewcode-back" href="../../api/kiva.basecore2d.html#kiva.basecore2d.GraphicsContextBase.get_path_current_point">[docs]</a>    <span class="k">def</span> <span class="nf">get_path_current_point</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns the current point from the graphics context.</span>

<span class="sd">            Note:</span>
<span class="sd">                Currently the current_point is only affected by move_to,</span>
<span class="sd">                line_to, and lines.  It should also be affected by text</span>
<span class="sd">                operations.  I&#39;m not sure how rect and rects and friends</span>
<span class="sd">                should affect it -- will find out on Mac.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="GraphicsContextBase.get_path_bounding_box"><a class="viewcode-back" href="../../api/kiva.basecore2d.html#kiva.basecore2d.GraphicsContextBase.get_path_bounding_box">[docs]</a>    <span class="k">def</span> <span class="nf">get_path_bounding_box</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="GraphicsContextBase.from_agg_affine"><a class="viewcode-back" href="../../api/kiva.basecore2d.html#kiva.basecore2d.GraphicsContextBase.from_agg_affine">[docs]</a>    <span class="k">def</span> <span class="nf">from_agg_affine</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">aff</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Convert an agg.AffineTransform to a numpy matrix</span>
<span class="sd">        representing the affine transform usable by kiva.affine</span>
<span class="sd">        and other non-agg parts of kiva&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">array</span><span class="p">(</span>
            <span class="p">[</span>
                <span class="p">[</span><span class="n">aff</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">aff</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="mi">0</span><span class="p">],</span>
                <span class="p">[</span><span class="n">aff</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">aff</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="mi">0</span><span class="p">],</span>
                <span class="p">[</span><span class="n">aff</span><span class="p">[</span><span class="mi">4</span><span class="p">],</span> <span class="n">aff</span><span class="p">[</span><span class="mi">5</span><span class="p">],</span> <span class="mi">1</span><span class="p">],</span>
            <span class="p">],</span>
            <span class="n">float64</span><span class="p">,</span>
        <span class="p">)</span></div>

<div class="viewcode-block" id="GraphicsContextBase.add_path"><a class="viewcode-back" href="../../api/kiva.basecore2d.html#kiva.basecore2d.GraphicsContextBase.add_path">[docs]</a>    <span class="k">def</span> <span class="nf">add_path</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Draw a compiled path into this gc.  Note: if the CTM is</span>
<span class="sd">        changed and not restored to the identity in the compiled path,</span>
<span class="sd">        the CTM change will continue in this GC.&quot;&quot;&quot;</span>
        <span class="c1"># Local import to avoid a dependency if we can avoid it.</span>
        <span class="kn">from</span> <span class="nn">kiva</span> <span class="k">import</span> <span class="n">agg</span>

        <span class="n">multi_state</span> <span class="o">=</span> <span class="mi">0</span>  <span class="c1"># For multi-element path commands we keep the previous</span>
        <span class="n">x_ctrl1</span> <span class="o">=</span> <span class="mi">0</span>  <span class="c1"># information in these variables.</span>
        <span class="n">y_ctrl1</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">x_ctrl2</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">y_ctrl2</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">cmd</span><span class="p">,</span> <span class="n">flag</span> <span class="ow">in</span> <span class="n">path</span><span class="o">.</span><span class="n">_vertices</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">cmd</span> <span class="o">==</span> <span class="n">agg</span><span class="o">.</span><span class="n">path_cmd_line_to</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">line_to</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">cmd</span> <span class="o">==</span> <span class="n">agg</span><span class="o">.</span><span class="n">path_cmd_move_to</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">move_to</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">cmd</span> <span class="o">==</span> <span class="n">agg</span><span class="o">.</span><span class="n">path_cmd_stop</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">concat_ctm</span><span class="p">(</span><span class="n">path</span><span class="o">.</span><span class="n">get_kiva_ctm</span><span class="p">())</span>
            <span class="k">elif</span> <span class="n">cmd</span> <span class="o">==</span> <span class="n">agg</span><span class="o">.</span><span class="n">path_cmd_end_poly</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">close_path</span><span class="p">()</span>
            <span class="k">elif</span> <span class="n">cmd</span> <span class="o">==</span> <span class="n">agg</span><span class="o">.</span><span class="n">path_cmd_curve3</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">multi_state</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">x_ctrl1</span> <span class="o">=</span> <span class="n">x</span>
                    <span class="n">y_ctrl1</span> <span class="o">=</span> <span class="n">y</span>
                    <span class="n">multi_state</span> <span class="o">=</span> <span class="mi">1</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">quad_curve_to</span><span class="p">(</span><span class="n">x_ctrl1</span><span class="p">,</span> <span class="n">y_ctrl1</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
                    <span class="n">multi_state</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="k">elif</span> <span class="n">cmd</span> <span class="o">==</span> <span class="n">agg</span><span class="o">.</span><span class="n">path_cmd_curve4</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">multi_state</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">x_ctrl1</span> <span class="o">=</span> <span class="n">x</span>
                    <span class="n">y_ctrl1</span> <span class="o">=</span> <span class="n">y</span>
                    <span class="n">multi_state</span> <span class="o">=</span> <span class="mi">1</span>
                <span class="k">elif</span> <span class="n">multi_state</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                    <span class="n">x_ctrl2</span> <span class="o">=</span> <span class="n">x</span>
                    <span class="n">y_ctrl2</span> <span class="o">=</span> <span class="n">y</span>
                    <span class="n">multi_state</span> <span class="o">=</span> <span class="mi">2</span>
                <span class="k">elif</span> <span class="n">multi_state</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">curve_to</span><span class="p">(</span><span class="n">x_ctrl1</span><span class="p">,</span> <span class="n">y_ctrl1</span><span class="p">,</span> <span class="n">x_ctrl2</span><span class="p">,</span> <span class="n">y_ctrl2</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span></div>

    <span class="c1"># ----------------------------------------------------------------</span>
    <span class="c1"># Clipping path manipulation</span>
    <span class="c1"># ----------------------------------------------------------------</span>

<div class="viewcode-block" id="GraphicsContextBase.clip"><a class="viewcode-back" href="../../api/kiva.basecore2d.html#kiva.basecore2d.GraphicsContextBase.clip">[docs]</a>    <span class="k">def</span> <span class="nf">clip</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="GraphicsContextBase.even_odd_clip"><a class="viewcode-back" href="../../api/kiva.basecore2d.html#kiva.basecore2d.GraphicsContextBase.even_odd_clip">[docs]</a>    <span class="k">def</span> <span class="nf">even_odd_clip</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="GraphicsContextBase.clip_to_rect"><a class="viewcode-back" href="../../api/kiva.basecore2d.html#kiva.basecore2d.GraphicsContextBase.clip_to_rect">[docs]</a>    <span class="k">def</span> <span class="nf">clip_to_rect</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            Sets the clipping path to the intersection of the current clipping</span>
<span class="sd">            path with the area defined by the specified rectangle</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">clipping_path</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">clipping_path</span> <span class="o">=</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">device_set_clipping_path</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># Find the intersection of the clipping regions:</span>
            <span class="n">xmin1</span><span class="p">,</span> <span class="n">ymin1</span><span class="p">,</span> <span class="n">width1</span><span class="p">,</span> <span class="n">height1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">clipping_path</span>
            <span class="n">xclip_min</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">xmin1</span><span class="p">,</span> <span class="n">x</span><span class="p">)</span>
            <span class="n">xclip_max</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">xmin1</span> <span class="o">+</span> <span class="n">width1</span><span class="p">,</span> <span class="n">x</span> <span class="o">+</span> <span class="n">width</span><span class="p">)</span>
            <span class="n">yclip_min</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">ymin1</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
            <span class="n">yclip_max</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">ymin1</span> <span class="o">+</span> <span class="n">height1</span><span class="p">,</span> <span class="n">y</span> <span class="o">+</span> <span class="n">height</span><span class="p">)</span>
            <span class="n">height_clip</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">yclip_max</span> <span class="o">-</span> <span class="n">yclip_min</span><span class="p">)</span>
            <span class="n">width_clip</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">xclip_max</span> <span class="o">-</span> <span class="n">xclip_min</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">clipping_path</span> <span class="o">=</span> <span class="p">(</span>
                <span class="n">xclip_min</span><span class="p">,</span> <span class="n">yclip_min</span><span class="p">,</span> <span class="n">width_clip</span><span class="p">,</span> <span class="n">height_clip</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">device_set_clipping_path</span><span class="p">(</span>
                <span class="n">xclip_min</span><span class="p">,</span> <span class="n">yclip_min</span><span class="p">,</span> <span class="n">width_clip</span><span class="p">,</span> <span class="n">height_clip</span>
            <span class="p">)</span></div>

<div class="viewcode-block" id="GraphicsContextBase.clip_to_rects"><a class="viewcode-back" href="../../api/kiva.basecore2d.html#kiva.basecore2d.GraphicsContextBase.clip_to_rects">[docs]</a>    <span class="k">def</span> <span class="nf">clip_to_rects</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="GraphicsContextBase.clear_clip_path"><a class="viewcode-back" href="../../api/kiva.basecore2d.html#kiva.basecore2d.GraphicsContextBase.clear_clip_path">[docs]</a>    <span class="k">def</span> <span class="nf">clear_clip_path</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">clipping_path</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">device_destroy_clipping_path</span><span class="p">()</span></div>

    <span class="c1"># ----------------------------------------------------------------</span>
    <span class="c1"># Color manipulation</span>
    <span class="c1"># ----------------------------------------------------------------</span>

<div class="viewcode-block" id="GraphicsContextBase.set_fill_color"><a class="viewcode-back" href="../../api/kiva.basecore2d.html#kiva.basecore2d.GraphicsContextBase.set_fill_color">[docs]</a>    <span class="k">def</span> <span class="nf">set_fill_color</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">color</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            set_fill_color takes a sequences of rgb or rgba values</span>
<span class="sd">            between 0.0 and 1.0</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">color</span><span class="p">)</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">fill_color</span><span class="p">[:</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="n">color</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">fill_color</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="mf">1.0</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">fill_color</span><span class="p">[:]</span> <span class="o">=</span> <span class="n">color</span></div>

<div class="viewcode-block" id="GraphicsContextBase.get_fill_color"><a class="viewcode-back" href="../../api/kiva.basecore2d.html#kiva.basecore2d.GraphicsContextBase.get_fill_color">[docs]</a>    <span class="k">def</span> <span class="nf">get_fill_color</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">color</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            set_fill_color returns a sequence of rgb or rgba values</span>
<span class="sd">            between 0.0 and 1.0</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">fill_color</span></div>

<div class="viewcode-block" id="GraphicsContextBase.linear_gradient"><a class="viewcode-back" href="../../api/kiva.basecore2d.html#kiva.basecore2d.GraphicsContextBase.linear_gradient">[docs]</a>    <span class="k">def</span> <span class="nf">linear_gradient</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x1</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="n">x2</span><span class="p">,</span> <span class="n">y2</span><span class="p">,</span> <span class="n">stops</span><span class="p">,</span> <span class="n">spread_method</span><span class="p">,</span> <span class="n">units</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Modify the fill color to be a linear gradient &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="GraphicsContextBase.radial_gradient"><a class="viewcode-back" href="../../api/kiva.basecore2d.html#kiva.basecore2d.GraphicsContextBase.radial_gradient">[docs]</a>    <span class="k">def</span> <span class="nf">radial_gradient</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cx</span><span class="p">,</span> <span class="n">cy</span><span class="p">,</span> <span class="n">r</span><span class="p">,</span> <span class="n">fx</span><span class="p">,</span> <span class="n">fy</span><span class="p">,</span> <span class="n">stops</span><span class="p">,</span> <span class="n">spread_method</span><span class="p">,</span> <span class="n">units</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Modify the fill color to be a linear gradient &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="GraphicsContextBase.set_stroke_color"><a class="viewcode-back" href="../../api/kiva.basecore2d.html#kiva.basecore2d.GraphicsContextBase.set_stroke_color">[docs]</a>    <span class="k">def</span> <span class="nf">set_stroke_color</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">color</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            set_stroke_color takes a sequences of rgb or rgba values</span>
<span class="sd">            between 0.0 and 1.0</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">color</span><span class="p">)</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">line_state</span><span class="o">.</span><span class="n">line_color</span><span class="p">[:</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="n">color</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">line_state</span><span class="o">.</span><span class="n">line_color</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="mf">1.0</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">line_state</span><span class="o">.</span><span class="n">line_color</span><span class="p">[:]</span> <span class="o">=</span> <span class="n">color</span></div>

<div class="viewcode-block" id="GraphicsContextBase.get_stroke_color"><a class="viewcode-back" href="../../api/kiva.basecore2d.html#kiva.basecore2d.GraphicsContextBase.get_stroke_color">[docs]</a>    <span class="k">def</span> <span class="nf">get_stroke_color</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">color</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            set_stroke_color returns a sequence of rgb or rgba values</span>
<span class="sd">            between 0.0 and 1.0</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">stroke_color</span></div>

<div class="viewcode-block" id="GraphicsContextBase.set_alpha"><a class="viewcode-back" href="../../api/kiva.basecore2d.html#kiva.basecore2d.GraphicsContextBase.set_alpha">[docs]</a>    <span class="k">def</span> <span class="nf">set_alpha</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">alpha</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Set the alpha to use when drawing &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">alpha</span> <span class="o">=</span> <span class="n">alpha</span></div>

<div class="viewcode-block" id="GraphicsContextBase.get_alpha"><a class="viewcode-back" href="../../api/kiva.basecore2d.html#kiva.basecore2d.GraphicsContextBase.get_alpha">[docs]</a>    <span class="k">def</span> <span class="nf">get_alpha</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">alpha</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Return the alpha used when drawing &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">alpha</span></div>

    <span class="c1"># ----------------------------------------------------------------</span>
    <span class="c1"># Drawing Images</span>
    <span class="c1"># ----------------------------------------------------------------</span>

<div class="viewcode-block" id="GraphicsContextBase.draw_image"><a class="viewcode-back" href="../../api/kiva.basecore2d.html#kiva.basecore2d.GraphicsContextBase.draw_image">[docs]</a>    <span class="k">def</span> <span class="nf">draw_image</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">img</span><span class="p">,</span> <span class="n">rect</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">device_draw_image</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">rect</span><span class="p">)</span></div>

    <span class="c1"># -------------------------------------------------------------------------</span>
    <span class="c1"># Drawing Text</span>
    <span class="c1">#</span>
    <span class="c1"># Font handling needs more attention.</span>
    <span class="c1">#</span>
    <span class="c1"># -------------------------------------------------------------------------</span>

<div class="viewcode-block" id="GraphicsContextBase.select_font"><a class="viewcode-back" href="../../api/kiva.basecore2d.html#kiva.basecore2d.GraphicsContextBase.select_font">[docs]</a>    <span class="k">def</span> <span class="nf">select_font</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">face_name</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">12</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="s2">&quot;regular&quot;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Selects a new font for drawing text.</span>

<span class="sd">            Parameters</span>
<span class="sd">            ----------</span>

<span class="sd">            face_name</span>
<span class="sd">                The name of a font. E.g.: &quot;Times New Roman&quot;</span>
<span class="sd">                !! Need to specify a way to check for all the types</span>
<span class="sd">                size</span>
<span class="sd">                The font size in points.</span>
<span class="sd">            style</span>
<span class="sd">                One of &quot;regular&quot;, &quot;bold&quot;, &quot;italic&quot;, &quot;bold italic&quot;</span>
<span class="sd">            encoding</span>
<span class="sd">                A 4 letter encoding name. Common ones are:</span>

<span class="sd">                    * &quot;unic&quot; -- unicode</span>
<span class="sd">                    * &quot;armn&quot; -- apple roman</span>
<span class="sd">                    * &quot;symb&quot; -- symbol</span>

<span class="sd">                 Not all fonts support all encodings.  If none is</span>
<span class="sd">                 specified, fonts that have unicode encodings</span>
<span class="sd">                 default to unicode.  Symbol is the second choice.</span>
<span class="sd">                 If neither are available, the encoding defaults</span>
<span class="sd">                 to the first one returned in the FreeType charmap</span>
<span class="sd">                 list for the font face.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># !! should check if name and encoding are valid.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">font</span> <span class="o">=</span> <span class="n">Font</span><span class="p">(</span><span class="n">face_name</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="n">size</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="n">style</span><span class="p">)</span></div>

<div class="viewcode-block" id="GraphicsContextBase.set_font"><a class="viewcode-back" href="../../api/kiva.basecore2d.html#kiva.basecore2d.GraphicsContextBase.set_font">[docs]</a>    <span class="k">def</span> <span class="nf">set_font</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">font</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Set the font for the current graphics context.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">font</span> <span class="o">=</span> <span class="n">font</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span></div>

<div class="viewcode-block" id="GraphicsContextBase.get_font"><a class="viewcode-back" href="../../api/kiva.basecore2d.html#kiva.basecore2d.GraphicsContextBase.get_font">[docs]</a>    <span class="k">def</span> <span class="nf">get_font</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">font</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Set the font for the current graphics context.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">font</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span></div>

<div class="viewcode-block" id="GraphicsContextBase.set_font_size"><a class="viewcode-back" href="../../api/kiva.basecore2d.html#kiva.basecore2d.GraphicsContextBase.set_font_size">[docs]</a>    <span class="k">def</span> <span class="nf">set_font_size</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">size</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Sets the size of the font.</span>

<span class="sd">            The size is specified in user space coordinates.</span>

<span class="sd">            Note:</span>
<span class="sd">                I don&#39;t think the units of this are really &quot;user space</span>
<span class="sd">                coordinates&quot; on most platforms.  I haven&#39;t looked into</span>
<span class="sd">                the text drawing that much, so this stuff needs more</span>
<span class="sd">                attention.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">font</span><span class="o">.</span><span class="n">size</span> <span class="o">=</span> <span class="n">size</span></div>

<div class="viewcode-block" id="GraphicsContextBase.set_character_spacing"><a class="viewcode-back" href="../../api/kiva.basecore2d.html#kiva.basecore2d.GraphicsContextBase.set_character_spacing">[docs]</a>    <span class="k">def</span> <span class="nf">set_character_spacing</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">spacing</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Sets the amount of additional spacing between text characters.</span>

<span class="sd">            Parameters</span>
<span class="sd">            ----------</span>

<span class="sd">            spacing : float</span>
<span class="sd">                units of space extra space to add between</span>
<span class="sd">                text coordinates.  It is specified in text coordinate</span>
<span class="sd">                system.</span>

<span class="sd">            Notes</span>
<span class="sd">            -----</span>
<span class="sd">            1.  I&#39;m assuming this is horizontal spacing?</span>
<span class="sd">            2.  Not implemented in wxPython.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">character_spacing</span> <span class="o">=</span> <span class="n">spacing</span></div>

<div class="viewcode-block" id="GraphicsContextBase.get_character_spacing"><a class="viewcode-back" href="../../api/kiva.basecore2d.html#kiva.basecore2d.GraphicsContextBase.get_character_spacing">[docs]</a>    <span class="k">def</span> <span class="nf">get_character_spacing</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Gets the amount of additional spacing between text characters. &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">character_spacing</span></div>

<div class="viewcode-block" id="GraphicsContextBase.set_text_drawing_mode"><a class="viewcode-back" href="../../api/kiva.basecore2d.html#kiva.basecore2d.GraphicsContextBase.set_text_drawing_mode">[docs]</a>    <span class="k">def</span> <span class="nf">set_text_drawing_mode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mode</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Specifies whether text is drawn filled or outlined or both.</span>

<span class="sd">            Parameters</span>
<span class="sd">            ----------</span>

<span class="sd">            mode</span>
<span class="sd">                determines how text is drawn to the screen.  If</span>
<span class="sd">                a CLIP flag is set, the font outline is added to the</span>
<span class="sd">                clipping path. Possible values:</span>

<span class="sd">                    TEXT_FILL</span>
<span class="sd">                        fill the text</span>
<span class="sd">                    TEXT_STROKE</span>
<span class="sd">                        paint the outline</span>
<span class="sd">                    TEXT_FILL_STROKE</span>
<span class="sd">                        fill and outline</span>
<span class="sd">                    TEXT_INVISIBLE</span>
<span class="sd">                        paint it invisibly ??</span>
<span class="sd">                    TEXT_FILL_CLIP</span>
<span class="sd">                        fill and add outline clipping path</span>
<span class="sd">                    TEXT_STROKE_CLIP</span>
<span class="sd">                        outline and add outline to clipping path</span>
<span class="sd">                    TEXT_FILL_STROKE_CLIP</span>
<span class="sd">                        fill, outline, and add to clipping path</span>
<span class="sd">                    TEXT_CLIP</span>
<span class="sd">                        add text outline to clipping path</span>

<span class="sd">            Note:</span>
<span class="sd">                wxPython currently ignores all but the INVISIBLE flag.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">text_modes</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">TEXT_FILL</span><span class="p">,</span> <span class="n">TEXT_STROKE</span><span class="p">,</span> <span class="n">TEXT_FILL_STROKE</span><span class="p">,</span> <span class="n">TEXT_INVISIBLE</span><span class="p">,</span>
            <span class="n">TEXT_FILL_CLIP</span><span class="p">,</span> <span class="n">TEXT_STROKE_CLIP</span><span class="p">,</span> <span class="n">TEXT_FILL_STROKE_CLIP</span><span class="p">,</span> <span class="n">TEXT_CLIP</span><span class="p">,</span>
            <span class="n">TEXT_OUTLINE</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">mode</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">text_modes</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="p">(</span>
                <span class="s2">&quot;Invalid text drawing mode.  See documentation for valid &quot;</span>
                <span class="o">+</span> <span class="s2">&quot;modes&quot;</span>
            <span class="p">)</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">text_drawing_mode</span> <span class="o">=</span> <span class="n">mode</span></div>

<div class="viewcode-block" id="GraphicsContextBase.set_text_position"><a class="viewcode-back" href="../../api/kiva.basecore2d.html#kiva.basecore2d.GraphicsContextBase.set_text_position">[docs]</a>    <span class="k">def</span> <span class="nf">set_text_position</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="n">d</span><span class="p">,</span> <span class="n">tx</span><span class="p">,</span> <span class="n">ty</span> <span class="o">=</span> <span class="n">affine</span><span class="o">.</span><span class="n">affine_params</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">text_matrix</span><span class="p">)</span>
        <span class="n">tx</span><span class="p">,</span> <span class="n">ty</span> <span class="o">=</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">text_matrix</span> <span class="o">=</span> <span class="n">affine</span><span class="o">.</span><span class="n">affine_from_values</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="n">d</span><span class="p">,</span> <span class="n">tx</span><span class="p">,</span> <span class="n">ty</span><span class="p">)</span></div>

<div class="viewcode-block" id="GraphicsContextBase.get_text_position"><a class="viewcode-back" href="../../api/kiva.basecore2d.html#kiva.basecore2d.GraphicsContextBase.get_text_position">[docs]</a>    <span class="k">def</span> <span class="nf">get_text_position</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="n">d</span><span class="p">,</span> <span class="n">tx</span><span class="p">,</span> <span class="n">ty</span> <span class="o">=</span> <span class="n">affine</span><span class="o">.</span><span class="n">affine_params</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">text_matrix</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">tx</span><span class="p">,</span> <span class="n">ty</span></div>

<div class="viewcode-block" id="GraphicsContextBase.set_text_matrix"><a class="viewcode-back" href="../../api/kiva.basecore2d.html#kiva.basecore2d.GraphicsContextBase.set_text_matrix">[docs]</a>    <span class="k">def</span> <span class="nf">set_text_matrix</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ttm</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">text_matrix</span> <span class="o">=</span> <span class="n">ttm</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span></div>

<div class="viewcode-block" id="GraphicsContextBase.get_text_matrix"><a class="viewcode-back" href="../../api/kiva.basecore2d.html#kiva.basecore2d.GraphicsContextBase.get_text_matrix">[docs]</a>    <span class="k">def</span> <span class="nf">get_text_matrix</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">text_matrix</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span></div>

<div class="viewcode-block" id="GraphicsContextBase.show_text"><a class="viewcode-back" href="../../api/kiva.basecore2d.html#kiva.basecore2d.GraphicsContextBase.show_text">[docs]</a>    <span class="k">def</span> <span class="nf">show_text</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Draws text on the device at the current text position.</span>

<span class="sd">            This calls the device dependent device_show_text() method to</span>
<span class="sd">            do all the heavy lifting.</span>

<span class="sd">            It is not clear yet how this should affect the current point.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">device_show_text</span><span class="p">(</span><span class="n">text</span><span class="p">)</span></div>

<div class="viewcode-block" id="GraphicsContextBase.show_text_tanslate"><a class="viewcode-back" href="../../api/kiva.basecore2d.html#kiva.basecore2d.GraphicsContextBase.show_text_tanslate">[docs]</a>    <span class="k">def</span> <span class="nf">show_text_tanslate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="n">dx</span><span class="p">,</span> <span class="n">dy</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Draws text at the specified offset. &quot;&quot;&quot;</span>
        <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_text_position</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_text_position</span><span class="p">(</span><span class="n">x</span> <span class="o">+</span> <span class="n">dx</span><span class="p">,</span> <span class="n">y</span> <span class="o">+</span> <span class="n">dy</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">device_show_text</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_text_position</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span></div>

    <span class="c1"># ------------------------------------------------------------------------</span>
    <span class="c1"># kiva defaults to drawing text using the freetype rendering engine.</span>
    <span class="c1">#</span>
    <span class="c1"># If you would like to use a systems native text rendering engine,</span>
    <span class="c1"># override this method in the class concrete derived from this one.</span>
    <span class="c1"># ------------------------------------------------------------------------</span>
<div class="viewcode-block" id="GraphicsContextBase.device_show_text"><a class="viewcode-back" href="../../api/kiva.basecore2d.html#kiva.basecore2d.GraphicsContextBase.device_show_text">[docs]</a>    <span class="k">def</span> <span class="nf">device_show_text</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Draws text on the device at the current text position.</span>

<span class="sd">            This relies on the FreeType engine to render the text to an array</span>
<span class="sd">            and then calls the device dependent device_show_text() to display</span>
<span class="sd">            the rendered image to the screen.</span>

<span class="sd">            !! antiliasing is turned off until we get alpha blending</span>
<span class="sd">            !! of images figured out.</span>
<span class="sd">        &quot;&quot;&quot;</span></div>

        <span class="c1"># This is not currently implemented in a device-independent way.</span>

<div class="viewcode-block" id="GraphicsContextBase.show_glyphs"><a class="viewcode-back" href="../../api/kiva.basecore2d.html#kiva.basecore2d.GraphicsContextBase.show_glyphs">[docs]</a>    <span class="k">def</span> <span class="nf">show_glyphs</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="GraphicsContextBase.show_text_at_point"><a class="viewcode-back" href="../../api/kiva.basecore2d.html#kiva.basecore2d.GraphicsContextBase.show_text_at_point">[docs]</a>    <span class="k">def</span> <span class="nf">show_text_at_point</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="GraphicsContextBase.show_glyphs_at_point"><a class="viewcode-back" href="../../api/kiva.basecore2d.html#kiva.basecore2d.GraphicsContextBase.show_glyphs_at_point">[docs]</a>    <span class="k">def</span> <span class="nf">show_glyphs_at_point</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

    <span class="c1"># ----------------------------------------------------------------</span>
    <span class="c1"># Painting paths (drawing and filling contours)</span>
    <span class="c1"># ----------------------------------------------------------------</span>

<div class="viewcode-block" id="GraphicsContextBase.get_empty_path"><a class="viewcode-back" href="../../api/kiva.basecore2d.html#kiva.basecore2d.GraphicsContextBase.get_empty_path">[docs]</a>    <span class="k">def</span> <span class="nf">get_empty_path</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Get an empty CompiledPath instance &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="GraphicsContextBase.stroke_path"><a class="viewcode-back" href="../../api/kiva.basecore2d.html#kiva.basecore2d.GraphicsContextBase.stroke_path">[docs]</a>    <span class="k">def</span> <span class="nf">stroke_path</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">draw_path</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="n">STROKE</span><span class="p">)</span></div>

<div class="viewcode-block" id="GraphicsContextBase.fill_path"><a class="viewcode-back" href="../../api/kiva.basecore2d.html#kiva.basecore2d.GraphicsContextBase.fill_path">[docs]</a>    <span class="k">def</span> <span class="nf">fill_path</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">draw_path</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="n">FILL</span><span class="p">)</span></div>

<div class="viewcode-block" id="GraphicsContextBase.eof_fill_path"><a class="viewcode-back" href="../../api/kiva.basecore2d.html#kiva.basecore2d.GraphicsContextBase.eof_fill_path">[docs]</a>    <span class="k">def</span> <span class="nf">eof_fill_path</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">draw_path</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="n">EOF_FILL</span><span class="p">)</span></div>

<div class="viewcode-block" id="GraphicsContextBase.draw_path"><a class="viewcode-back" href="../../api/kiva.basecore2d.html#kiva.basecore2d.GraphicsContextBase.draw_path">[docs]</a>    <span class="k">def</span> <span class="nf">draw_path</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="n">FILL_STROKE</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Walks through all the drawing subpaths and draw each element.</span>

<span class="sd">            Each subpath is drawn separately.</span>

<span class="sd">            Parameters</span>
<span class="sd">            ----------</span>
<span class="sd">            mode</span>
<span class="sd">                Specifies how the subpaths are drawn.  The default is</span>
<span class="sd">                FILL_STROKE.  The following are valid values.</span>

<span class="sd">                    FILL</span>
<span class="sd">                        Paint the path using the nonzero winding rule</span>
<span class="sd">                        to determine the regions for painting.</span>
<span class="sd">                    EOF_FILL</span>
<span class="sd">                        Paint the path using the even-odd fill rule.</span>
<span class="sd">                    STROKE</span>
<span class="sd">                        Draw the outline of the path with the</span>
<span class="sd">                        current width, end caps, etc settings.</span>
<span class="sd">                    FILL_STROKE</span>
<span class="sd">                        First fill the path using the nonzero</span>
<span class="sd">                        winding rule, then stroke the path.</span>
<span class="sd">                    EOF_FILL_STROKE</span>
<span class="sd">                        First fill the path using the even-odd</span>
<span class="sd">                        fill method, then stroke the path.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># ---------------------------------------------------------------------</span>
        <span class="c1"># FILL AND STROKE settings are handled by setting the alpha value of</span>
        <span class="c1"># the line and fill colors to zero (transparent) if stroke or fill</span>
        <span class="c1"># is not needed.</span>
        <span class="c1"># ---------------------------------------------------------------------</span>

        <span class="n">old_line_alpha</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">line_state</span><span class="o">.</span><span class="n">line_color</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
        <span class="n">old_fill_alpha</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">fill_color</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">mode</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="n">STROKE</span><span class="p">,</span> <span class="n">FILL_STROKE</span><span class="p">,</span> <span class="n">EOF_FILL_STROKE</span><span class="p">]:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">line_state</span><span class="o">.</span><span class="n">line_color</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="mf">0.0</span>
        <span class="k">if</span> <span class="n">mode</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="n">FILL</span><span class="p">,</span> <span class="n">EOF_FILL</span><span class="p">,</span> <span class="n">FILL_STROKE</span><span class="p">,</span> <span class="n">EOF_FILL_STROKE</span><span class="p">]:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">fill_color</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="mf">0.0</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">device_update_line_state</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">device_update_fill_state</span><span class="p">()</span>

        <span class="n">ctm_funcs</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">SCALE_CTM</span><span class="p">,</span> <span class="n">ROTATE_CTM</span><span class="p">,</span> <span class="n">TRANSLATE_CTM</span><span class="p">,</span> <span class="n">CONCAT_CTM</span><span class="p">,</span> <span class="n">LOAD_CTM</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">for</span> <span class="n">subpath</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="p">:</span>
            <span class="c1"># reset the current point for drawing.</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">clear_subpath_points</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">func</span><span class="p">,</span> <span class="n">args</span> <span class="ow">in</span> <span class="n">subpath</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">func</span> <span class="o">==</span> <span class="n">POINT</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">draw_subpath</span><span class="p">(</span><span class="n">mode</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">add_point_to_subpath</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">first_point</span> <span class="o">=</span> <span class="n">args</span>
                <span class="k">elif</span> <span class="n">func</span> <span class="o">==</span> <span class="n">LINE</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">add_point_to_subpath</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>
                <span class="k">elif</span> <span class="n">func</span> <span class="o">==</span> <span class="n">LINES</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">draw_subpath</span><span class="p">(</span><span class="n">mode</span><span class="p">)</span>
                    <span class="c1"># add all points in list to subpath.</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">add_point_to_subpath</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">first_point</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                <span class="k">elif</span> <span class="n">func</span> <span class="o">==</span> <span class="n">CLOSE</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">add_point_to_subpath</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">first_point</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">draw_subpath</span><span class="p">(</span><span class="n">mode</span><span class="p">)</span>
                <span class="k">elif</span> <span class="n">func</span> <span class="o">==</span> <span class="n">RECT</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">draw_subpath</span><span class="p">(</span><span class="n">mode</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">device_draw_rect</span><span class="p">(</span>
                        <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">args</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">args</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">args</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="n">mode</span>
                    <span class="p">)</span>
                <span class="k">elif</span> <span class="n">func</span> <span class="ow">in</span> <span class="n">ctm_funcs</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">device_transform_device_ctm</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="n">args</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;oops:&quot;</span><span class="p">,</span> <span class="n">func</span><span class="p">)</span>
            <span class="c1"># finally, draw any remaining paths.</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">draw_subpath</span><span class="p">(</span><span class="n">mode</span><span class="p">)</span>

        <span class="c1"># ---------------------------------------------------------------------</span>
        <span class="c1"># reset the alpha values for line and fill values.</span>
        <span class="c1"># ---------------------------------------------------------------------</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">line_state</span><span class="o">.</span><span class="n">line_color</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="n">old_line_alpha</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">fill_color</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="n">old_fill_alpha</span>

        <span class="c1"># ---------------------------------------------------------------------</span>
        <span class="c1"># drawing methods always consume the path on Mac OS X.  We&#39;ll follow</span>
        <span class="c1"># this convention to make implementation there easier.</span>
        <span class="c1"># ---------------------------------------------------------------------</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">begin_path</span><span class="p">()</span></div>

<div class="viewcode-block" id="GraphicsContextBase.device_prepare_device_ctm"><a class="viewcode-back" href="../../api/kiva.basecore2d.html#kiva.basecore2d.GraphicsContextBase.device_prepare_device_ctm">[docs]</a>    <span class="k">def</span> <span class="nf">device_prepare_device_ctm</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">device_ctm</span> <span class="o">=</span> <span class="n">affine</span><span class="o">.</span><span class="n">affine_identity</span><span class="p">()</span></div>

<div class="viewcode-block" id="GraphicsContextBase.device_transform_device_ctm"><a class="viewcode-back" href="../../api/kiva.basecore2d.html#kiva.basecore2d.GraphicsContextBase.device_transform_device_ctm">[docs]</a>    <span class="k">def</span> <span class="nf">device_transform_device_ctm</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">func</span><span class="p">,</span> <span class="n">args</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Default implementation for handling scaling matrices.</span>

<span class="sd">            Many implementations will just use this function.  Others, like</span>
<span class="sd">            OpenGL, can benefit from overriding the method and using</span>
<span class="sd">            hardware acceleration.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">func</span> <span class="o">==</span> <span class="n">SCALE_CTM</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">device_ctm</span> <span class="o">=</span> <span class="n">affine</span><span class="o">.</span><span class="n">scale</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">device_ctm</span><span class="p">,</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">args</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
        <span class="k">elif</span> <span class="n">func</span> <span class="o">==</span> <span class="n">ROTATE_CTM</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">device_ctm</span> <span class="o">=</span> <span class="n">affine</span><span class="o">.</span><span class="n">rotate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">device_ctm</span><span class="p">,</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="k">elif</span> <span class="n">func</span> <span class="o">==</span> <span class="n">TRANSLATE_CTM</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">device_ctm</span> <span class="o">=</span> <span class="n">affine</span><span class="o">.</span><span class="n">translate</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">device_ctm</span><span class="p">,</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">args</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
            <span class="p">)</span>
        <span class="k">elif</span> <span class="n">func</span> <span class="o">==</span> <span class="n">CONCAT_CTM</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">device_ctm</span> <span class="o">=</span> <span class="n">affine</span><span class="o">.</span><span class="n">concat</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">device_ctm</span><span class="p">,</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="k">elif</span> <span class="n">func</span> <span class="o">==</span> <span class="n">LOAD_CTM</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">device_ctm</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span></div>

<div class="viewcode-block" id="GraphicsContextBase.device_draw_rect"><a class="viewcode-back" href="../../api/kiva.basecore2d.html#kiva.basecore2d.GraphicsContextBase.device_draw_rect">[docs]</a>    <span class="k">def</span> <span class="nf">device_draw_rect</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">sx</span><span class="p">,</span> <span class="n">sy</span><span class="p">,</span> <span class="n">mode</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Default implementation of drawing  a rect.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_new_subpath</span><span class="p">()</span>
        <span class="c1"># When rectangles are rotated, they have to be drawn as a polygon</span>
        <span class="c1"># on most devices.  We&#39;ll need to specialize this on API&#39;s that</span>
        <span class="c1"># can handle rotated rects such as Quartz and OpenGL(?).</span>
        <span class="c1"># All transformations are done in the call to lines().</span>
        <span class="n">pts</span> <span class="o">=</span> <span class="n">array</span><span class="p">(</span>
            <span class="p">((</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">),</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">+</span> <span class="n">sy</span><span class="p">),</span> <span class="p">(</span><span class="n">x</span> <span class="o">+</span> <span class="n">sx</span><span class="p">,</span> <span class="n">y</span> <span class="o">+</span> <span class="n">sy</span><span class="p">),</span> <span class="p">(</span><span class="n">x</span> <span class="o">+</span> <span class="n">sx</span><span class="p">,</span> <span class="n">y</span><span class="p">),</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">))</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_point_to_subpath</span><span class="p">(</span><span class="n">pts</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">draw_subpath</span><span class="p">(</span><span class="n">mode</span><span class="p">)</span></div>

<div class="viewcode-block" id="GraphicsContextBase.stroke_rect"><a class="viewcode-back" href="../../api/kiva.basecore2d.html#kiva.basecore2d.GraphicsContextBase.stroke_rect">[docs]</a>    <span class="k">def</span> <span class="nf">stroke_rect</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="GraphicsContextBase.stroke_rect_with_width"><a class="viewcode-back" href="../../api/kiva.basecore2d.html#kiva.basecore2d.GraphicsContextBase.stroke_rect_with_width">[docs]</a>    <span class="k">def</span> <span class="nf">stroke_rect_with_width</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="GraphicsContextBase.fill_rect"><a class="viewcode-back" href="../../api/kiva.basecore2d.html#kiva.basecore2d.GraphicsContextBase.fill_rect">[docs]</a>    <span class="k">def</span> <span class="nf">fill_rect</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="GraphicsContextBase.fill_rects"><a class="viewcode-back" href="../../api/kiva.basecore2d.html#kiva.basecore2d.GraphicsContextBase.fill_rects">[docs]</a>    <span class="k">def</span> <span class="nf">fill_rects</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="GraphicsContextBase.clear_rect"><a class="viewcode-back" href="../../api/kiva.basecore2d.html#kiva.basecore2d.GraphicsContextBase.clear_rect">[docs]</a>    <span class="k">def</span> <span class="nf">clear_rect</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

    <span class="c1"># ----------------------------------------------------------------</span>
    <span class="c1"># Subpath point management and drawing routines.</span>
    <span class="c1"># ----------------------------------------------------------------</span>

<div class="viewcode-block" id="GraphicsContextBase.add_point_to_subpath"><a class="viewcode-back" href="../../api/kiva.basecore2d.html#kiva.basecore2d.GraphicsContextBase.add_point_to_subpath">[docs]</a>    <span class="k">def</span> <span class="nf">add_point_to_subpath</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pt</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">draw_points</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pt</span><span class="p">)</span></div>

<div class="viewcode-block" id="GraphicsContextBase.clear_subpath_points"><a class="viewcode-back" href="../../api/kiva.basecore2d.html#kiva.basecore2d.GraphicsContextBase.clear_subpath_points">[docs]</a>    <span class="k">def</span> <span class="nf">clear_subpath_points</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">draw_points</span> <span class="o">=</span> <span class="p">[]</span></div>

<div class="viewcode-block" id="GraphicsContextBase.get_subpath_points"><a class="viewcode-back" href="../../api/kiva.basecore2d.html#kiva.basecore2d.GraphicsContextBase.get_subpath_points">[docs]</a>    <span class="k">def</span> <span class="nf">get_subpath_points</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Gets the points that are in the current path.</span>

<span class="sd">            The first entry in the draw_points list may actually</span>
<span class="sd">            be an array.  If this is true, the other points are</span>
<span class="sd">            converted to an array and concatenated with the first</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">draw_points</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">shape</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">draw_points</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">first_points</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">draw_points</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">other_points</span> <span class="o">=</span> <span class="n">asarray</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">draw_points</span><span class="p">[</span><span class="mi">1</span><span class="p">:])</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">other_points</span><span class="p">):</span>
                <span class="n">pts</span> <span class="o">=</span> <span class="n">concatenate</span><span class="p">((</span><span class="n">first_points</span><span class="p">,</span> <span class="n">other_points</span><span class="p">),</span> <span class="mi">0</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">pts</span> <span class="o">=</span> <span class="n">first_points</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">pts</span> <span class="o">=</span> <span class="n">asarray</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">draw_points</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">pts</span></div>

<div class="viewcode-block" id="GraphicsContextBase.draw_subpath"><a class="viewcode-back" href="../../api/kiva.basecore2d.html#kiva.basecore2d.GraphicsContextBase.draw_subpath">[docs]</a>    <span class="k">def</span> <span class="nf">draw_subpath</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mode</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Fills and strokes the point path.</span>

<span class="sd">            After the path is drawn, the subpath point list is</span>
<span class="sd">            cleared and ready for the next subpath.</span>

<span class="sd">            Parameters</span>
<span class="sd">            ----------</span>

<span class="sd">            mode</span>
<span class="sd">                Specifies how the subpaths are drawn.  The default is</span>
<span class="sd">                FILL_STROKE.  The following are valid values.</span>

<span class="sd">                    FILL</span>
<span class="sd">                        Paint the path using the nonzero winding rule</span>
<span class="sd">                        to determine the regions for painting.</span>
<span class="sd">                    EOF_FILL</span>
<span class="sd">                        Paint the path using the even-odd fill rule.</span>
<span class="sd">                    STROKE</span>
<span class="sd">                        Draw the outline of the path with the</span>
<span class="sd">                        current width, end caps, etc settings.</span>
<span class="sd">                    FILL_STROKE</span>
<span class="sd">                        First fill the path using the nonzero</span>
<span class="sd">                        winding rule, then stroke the path.</span>
<span class="sd">                    EOF_FILL_STROKE</span>
<span class="sd">                        First fill the path using the even-odd</span>
<span class="sd">                        fill method, then stroke the path.</span>

<span class="sd">            Note:</span>
<span class="sd">                If path is closed, it is about 50% faster to call</span>
<span class="sd">                DrawPolygon with the correct pen set than it is to</span>
<span class="sd">                call DrawPolygon and DrawLines separately in wxPython. But,</span>
<span class="sd">                because paths can be left open, Polygon can&#39;t be</span>
<span class="sd">                called in the general case because it automatically</span>
<span class="sd">                closes the path.  We might want a separate check in here</span>
<span class="sd">                and allow devices to specify a faster version if the path is</span>
<span class="sd">                closed.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">pts</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_subpath_points</span><span class="p">()</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">pts</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">device_fill_points</span><span class="p">(</span><span class="n">pts</span><span class="p">,</span> <span class="n">mode</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">device_stroke_points</span><span class="p">(</span><span class="n">pts</span><span class="p">,</span> <span class="n">mode</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">clear_subpath_points</span><span class="p">()</span></div>

<div class="viewcode-block" id="GraphicsContextBase.get_text_extent"><a class="viewcode-back" href="../../api/kiva.basecore2d.html#kiva.basecore2d.GraphicsContextBase.get_text_extent">[docs]</a>    <span class="k">def</span> <span class="nf">get_text_extent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">textstring</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            Calls device specific text extent method.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">device_get_text_extent</span><span class="p">(</span><span class="n">textstring</span><span class="p">)</span></div>

<div class="viewcode-block" id="GraphicsContextBase.device_get_text_extent"><a class="viewcode-back" href="../../api/kiva.basecore2d.html#kiva.basecore2d.GraphicsContextBase.device_get_text_extent">[docs]</a>    <span class="k">def</span> <span class="nf">device_get_text_extent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">textstring</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">device_get_full_text_extent</span><span class="p">(</span><span class="n">textstring</span><span class="p">)</span></div>

<div class="viewcode-block" id="GraphicsContextBase.get_full_text_extent"><a class="viewcode-back" href="../../api/kiva.basecore2d.html#kiva.basecore2d.GraphicsContextBase.get_full_text_extent">[docs]</a>    <span class="k">def</span> <span class="nf">get_full_text_extent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">textstring</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            Calls device specific text extent method.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">device_get_full_text_extent</span><span class="p">(</span><span class="n">textstring</span><span class="p">)</span></div>

<div class="viewcode-block" id="GraphicsContextBase.device_get_full_text_extent"><a class="viewcode-back" href="../../api/kiva.basecore2d.html#kiva.basecore2d.GraphicsContextBase.device_get_full_text_extent">[docs]</a>    <span class="k">def</span> <span class="nf">device_get_full_text_extent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">textstring</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)</span></div>

    <span class="c1"># -------------------------------------------</span>
    <span class="c1"># Misc functions</span>
    <span class="c1"># -------------------------------------------</span>

<div class="viewcode-block" id="GraphicsContextBase.save"><a class="viewcode-back" href="../../api/kiva.basecore2d.html#kiva.basecore2d.GraphicsContextBase.save">[docs]</a>    <span class="k">def</span> <span class="nf">save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filename</span><span class="p">,</span> <span class="n">file_format</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">pil_options</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Save the graphics context to a file &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span></div></div>
</pre></div>

          </div>
        </div>
          </div>
      <div class="spc-rightsidebar span3">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../index.html">
              <img class="logo" src="../../_static/img/e-logo.png" alt="Logo">
            </a></p>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
        </div>
      </div>
    </div>

    <div class="container container-navbar-bottom">
      <div class="spc-navbar">
        
      </div>
    </div>
    <div class="container">
    <div class="footer">
    <div class="row-fluid">
    <ul class="inline pull-left">
      <li>
        &copy; Copyright 2005-2021, Enthought
      </li>
      <li>
      Last updated on Feb 23, 2021.
      </li>
      <li>
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 2.3.1.
      </li>
    </ul>
    </div>
    </div>
    </div>
  </body>
</html>