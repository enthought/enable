<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Enable Keyboard Events &mdash; enable 4.6.0 documentation</title>
    
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '4.6.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="shortcut icon" href="_static/et.ico"/>
    <link rel="top" title="enable 4.6.0 documentation" href="index.html" />
    <link rel="next" title="Enable Tools" href="enable_basic_tools.html" />
    <link rel="prev" title="Enable Constraints Layout" href="enable_constraints_layout.html" />
   
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9">

  </head>
  <body role="document">  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="enable-keyboard-events">
<h1>Enable Keyboard Events<a class="headerlink" href="#enable-keyboard-events" title="Permalink to this headline">¶</a></h1>
<p>Previous versions of Enable had just one keyboard event, a &#8216;key_pressed&#8217;
event.  This event conflated which key(s) were physically being pressed
with the text which should be generated by that keypress.  All the underlying
windowing/event systems have a way of distinguishing these two pieces of
information, either by issuing separate events for each (Wx, Pyglet, Vtk), or
by storing them as different attributes on the event object (Qt).</p>
<p>In addition, there was no way to detect a key-up event.  This is a comparatively
minor use case, but potentially useful for doing things like toggling pointer
states to indicate different mouse behaviour when modifiers keys are pressed.</p>
<div class="section" id="new-events">
<h2>New Events<a class="headerlink" href="#new-events" title="Permalink to this headline">¶</a></h2>
<dl class="docutils">
<dt>key_pressed:</dt>
<dd><p class="first">We will keep the &#8216;key_pressed&#8217; event.  However the semantics will change so
that it will keep track of the physical key being pressed rather than the
text being entered.  Thus pressing the &#8216;a&#8217; key with the shift key down will
result in an event with the &#8216;character&#8217; attribute set to &#8216;a&#8217;, instead of &#8216;A&#8217;
as it would be now.  The lower-case version of the character will be the
canonical representation of the key, since that will cause minimal problems
with existing event handlers in Enable and Chaco.</p>
<p>The character mapping will be used as it is now to map special keys to
standard strings (like right arrow generating the string &#8216;right&#8217;).</p>
<p>In addition, events will now be generated by pressing modifier keys by
themselves (eg. pressing shift will generate an event).</p>
<p>Most Chaco code will continue to use key_pressed as the primary event to
listen to, it will just work more consistently than it did before.  Some
code may need to change to reflect the change in what the character
attribute returns (XXX or we add a &#8216;key&#8217; attribute and deprecate the
&#8216;character&#8217; attribute).</p>
<p class="last">On Wx this event will be generated by EVT_KEY_DOWN, on Qt, this event
will be generated by keyPressEvent, but will access the &#8216;key()&#8217; attribute
rather than the &#8216;text()&#8217; attribute.</p>
</dd>
<dt>key_released:</dt>
<dd><p class="first">We will introduce a new &#8216;key_released&#8217; event, which is essentially the
mirror image of the &#8216;key_pressed&#8217; event.</p>
<p class="last">On Wx this event will be generated by EVT_KEY_UP, on Qt, this event
will be generated by keyReleaseEvent, but will access the &#8216;key()&#8217; attribute
rather than the &#8216;text()&#8217; attribute.</p>
</dd>
<dt>character:</dt>
<dd><p class="first">We will introduce a new &#8216;character&#8217; event, which will hold the
unicode characters, if any, that are generated by the key press
event.  It is possible that this event may also be generated by
other mechanisms in the future, like pasting text.  The event may
hold multiple characters.</p>
<p>This event will not be generated if the key_pressed event is handled.
This is largely because this is the way that wx works, but it also makes
a certain amount of sense from an interaction modelling point of view.</p>
<p>This will never do key mapping to standard Enable names for non-printable
characters: if there is no appropriate unicode representation, no event
will be emitted.</p>
<p>The handful of Enable widgets which expect actual text input will be
changed to use the character event instead of the key_pressed event.</p>
<p class="last">On Wx this event will be generated by EVT_CHAR, on Qt, this event
will be generated by keyPressEvent, but will access the &#8216;text()&#8217; attribute
rather than the &#8216;key()&#8217; attribute.</p>
</dd>
</dl>
</div>
<div class="section" id="why-three-events">
<h2>Why Three Events?<a class="headerlink" href="#why-three-events" title="Permalink to this headline">¶</a></h2>
<p>Qt&#8217;s two-event model is generally nicer and cleaner, but adapting the other
backends to use that model would require holding global state from EVT_KEY_DOWN
(or its equivalent) to fold in to the Enable event generated from EVT_CHAR.
This seems potentially fragile.  The other alternative would be to try to work
out from the EVT_KEY_DOWN what text would be generated, and that seems even more
fragile.</p>
<p>On the other hand, adapting Qt to a 3-event model is straightforward: on
keyPressedEvent we generate a &#8216;key_pressed&#8217; event, and if text() is non-empty,
we subsequently also emit a &#8216;character&#8217; event.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="index.html">
              <img class="logo" src="_static/e-logo-rev.png" alt="Logo"/>
            </a></p>
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Enable Keyboard Events</a><ul>
<li><a class="reference internal" href="#new-events">New Events</a></li>
<li><a class="reference internal" href="#why-three-events">Why Three Events?</a></li>
</ul>
</li>
</ul>
<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="enable_constraints_layout.html" title="previous chapter">Enable Constraints Layout</a></li>
      <li>Next: <a href="enable_basic_tools.html" title="next chapter">Enable Tools</a></li>
  </ul></li>
</ul>
</div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/enable_key_events.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2008-2015, Enthought.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.4.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.6</a>
      
      |
      <a href="_sources/enable_key_events.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>